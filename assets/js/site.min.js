!function(){"use strict";function e(e,t,o,i,r){function a(n){if(s)return r(new Error("Scroll cancelled"),t[e]);var i=+new Date,f=Math.min(1,(i-c)/l),m=d(f);t[e]=m*(o-u)+u,h(f<1?a:function(){r(null,t[e])})}var c=+new Date,u=t[e],s=!1,d=n,l=350;return"function"==typeof i?r=i:(d=(i=i||{}).ease||d,l=i.duration||l,r=r||function(){}),u===o?r(new Error("Element already at target scroll position"),t[e]):(h(a),function(){s=!0})}function n(e){return.5*(1-Math.cos(Math.PI*e))}var t=function(e){var n=new XMLHttpRequest,t=function(){};return n.open("GET",e,!0),{then:function(e){return n.onload=function(){(this.status<200||this.status>=400)&&t&&t(this),e(this.response)},n.onerror=t,n.send(),{catch:function(e){t=e}}}}};t("/assets/icons/sprite.svg").then(function(e){var n=document.createElement("figure");n.style.display="none",n.innerHTML=e,document.body.insertBefore(n,document.body.children[0])}).catch(function(e){console.warn("Icon spritesheet could not be loaded\n",e)});var o=function(e){return(arguments.length>1&&void 0!==arguments[1]?arguments[1]:document).querySelector(e)},i=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:document;return[].concat(function(e){if(Array.isArray(e)){for(var n=0,t=Array(e.length);n<e.length;n++)t[n]=e[n];return t}return Array.from(e)}(n.querySelectorAll(e)))},r=o("[data-timer]"),a=0,c=i("[data-slide]").map(function(e,n){return n?e.classList.remove("active-slide"):e.classList.add("active-slide"),e}),u=function(){c[a].classList.remove("active-slide"),a=a+1===c.length?0:a+1,c[a].classList.add("active-slide"),r.classList.add("running")};r.addEventListener("transitionend",function(){r.classList.remove("running"),setTimeout(u,125)}),setTimeout(function(){r.classList.add("running")},250);var s="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},d="undefined"!=typeof window?window:void 0!==s?s:"undefined"!=typeof self?self:{},l=Object.freeze({default:d,__moduleExports:d}),f=l&&d||l,m=function(e,n){return n={exports:{}},e(n,n.exports),n.exports}(function(e,n){var t=f.requestAnimationFrame||f.webkitRequestAnimationFrame||f.mozRequestAnimationFrame||function(e){var n=+new Date,t=Math.max(0,16-(n-o)),i=setTimeout(e,t);return o=n,i},o=+new Date,i=f.cancelAnimationFrame||f.webkitCancelAnimationFrame||f.mozCancelAnimationFrame||clearTimeout;Function.prototype.bind&&(t=t.bind(f),i=i.bind(f)),(e.exports=t).cancel=i}),p=m.cancel,v=Object.freeze({default:m,__moduleExports:m,cancel:p}),h=v&&m||v,g=function(n,t,o,i){return e("scrollTop",n,t,o,i)},w=function(e){return document.documentElement.scrollTop+o(e).getBoundingClientRect().top-o("[data-header]").clientHeight},y=function(e){e.preventDefault(),g(document.documentElement,w(this.getAttribute("href")),{duration:500})};i("[data-scroll-to]").forEach(function(e){e.addEventListener("click",y)});var E=document.documentElement,b=o("[data-header]"),L=void 0,A=void 0,k=void 0,M=function(){(L>10&&!k||L<=10&&k)&&(k=b.classList.toggle("header--docked")),A=!1};window.addEventListener("scroll",function(){A||requestAnimationFrame(M),A=!0,L=E.scrollTop});i("[data-card]").forEach(function(e){i("[data-card-flip]",e).forEach(function(n){n.addEventListener("click",function(e){return function(){return e.classList.add("card--flip")}}(e))}),i("[data-card-unflip]",e).forEach(function(n){n.addEventListener("click",function(e){return function(){return e.classList.remove("card--flip")}}(e))})});var T=document.getElementById("map");T&&t("/assets/data/map-config.json").then(function(e){var n=JSON.parse(e),t=n.key,o=n.options,i=n.marker,r=function(){return new google.maps.Map(T,o)},a=function(e){return new google.maps.Marker({position:i,map:e})};window.initMap=function(){a(r())},document.body.appendChild(function(e){var n=document.createElement("script");return n.setAttribute("async",""),n.setAttribute("defer",""),n.setAttribute("src","https://maps.googleapis.com/maps/api/js?key="+e+"&callback=initMap"),n}(t))}).catch(function(e){return console.log(e)})}();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9zY3JvbGwvaW5kZXguanMiLCJzY3JpcHRzL21vZHVsZXMvZmV0Y2guanMiLCJzY3JpcHRzL21vZHVsZXMvaWNvbi1zcHJpdGUuanMiLCJzY3JpcHRzL21vZHVsZXMvZG9tLWhlbHBlcnMuanMiLCJzY3JpcHRzL21vZHVsZXMvc2xpZGVyLmpzIiwibm9kZV9tb2R1bGVzL2dsb2JhbC93aW5kb3cuanMiLCJub2RlX21vZHVsZXMvcmFmbC9pbmRleC5qcyIsInNjcmlwdHMvbW9kdWxlcy9zY3JvbGwtdG8uanMiLCJzY3JpcHRzL21vZHVsZXMvZG9jay1oZWFkZXIuanMiLCJzY3JpcHRzL21vZHVsZXMvY2FyZC1mbGlwLmpzIiwic2NyaXB0cy9tb2R1bGVzL2dvb2dsZS1tYXAuanMiXSwibmFtZXMiOlsic2Nyb2xsIiwicHJvcCIsImVsZW1lbnQiLCJ0byIsIm9wdGlvbnMiLCJjYWxsYmFjayIsImFuaW1hdGUiLCJ0aW1lc3RhbXAiLCJjYW5jZWxsZWQiLCJFcnJvciIsIm5vdyIsIkRhdGUiLCJ0aW1lIiwiTWF0aCIsIm1pbiIsInN0YXJ0IiwiZHVyYXRpb24iLCJlYXNlZCIsImVhc2UiLCJmcm9tIiwicmFmIiwiaW5PdXRTaW5lIiwibiIsImNvcyIsIlBJIiwiZmV0Y2giLCJ1cmkiLCJ4aHIiLCJYTUxIdHRwUmVxdWVzdCIsImVycm9ySGFuZGxlciIsIm9wZW4iLCJjYiIsIm9ubG9hZCIsInRoaXMiLCJzdGF0dXMiLCJyZXNwb25zZSIsIm9uZXJyb3IiLCJzZW5kIiwiaGFuZGxlciIsInRoZW4iLCJzcHJpdGUiLCJmaWd1cmUiLCJkb2N1bWVudCIsImNyZWF0ZUVsZW1lbnQiLCJzdHlsZSIsImRpc3BsYXkiLCJpbm5lckhUTUwiLCJib2R5IiwiaW5zZXJ0QmVmb3JlIiwiY2hpbGRyZW4iLCJjYXRjaCIsImVyciIsIndhcm4iLCJkb20iLCJxdWVyeSIsImFyZ3VtZW50cyIsImxlbmd0aCIsInVuZGVmaW5lZCIsInF1ZXJ5U2VsZWN0b3IiLCJzY29wZSIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJ0aW1lciIsImluZGV4Iiwic2xpZGVzIiwibWFwIiwibm9kZSIsImkiLCJjbGFzc0xpc3QiLCJyZW1vdmUiLCJhZGQiLCJzd2FwU2xpZGVzIiwiYWRkRXZlbnRMaXN0ZW5lciIsInNldFRpbWVvdXQiLCJ3aW5kb3dfMSIsIndpbmRvdyIsImdsb2JhbCIsInNlbGYiLCJyZXF1ZXN0IiwicmVxdWVzdEFuaW1hdGlvbkZyYW1lIiwid2Via2l0UmVxdWVzdEFuaW1hdGlvbkZyYW1lIiwibW96UmVxdWVzdEFuaW1hdGlvbkZyYW1lIiwiZm4iLCJjdXJyIiwibXMiLCJtYXgiLCJwcmV2IiwicmVxIiwiY2FuY2VsIiwiY2FuY2VsQW5pbWF0aW9uRnJhbWUiLCJ3ZWJraXRDYW5jZWxBbmltYXRpb25GcmFtZSIsIm1vekNhbmNlbEFuaW1hdGlvbkZyYW1lIiwiY2xlYXJUaW1lb3V0IiwiRnVuY3Rpb24iLCJwcm90b3R5cGUiLCJiaW5kIiwibW9kdWxlIiwic2Nyb2xsXzEiLCJyZXNvbHZlVGFyZ2V0IiwiaWQiLCJkb2N1bWVudEVsZW1lbnQiLCJzY3JvbGxUb3AiLCJnZXRCb3VuZGluZ0NsaWVudFJlY3QiLCJ0b3AiLCJjbGllbnRIZWlnaHQiLCJzY3JvbGxIYW5kbGVyIiwiZSIsInByZXZlbnREZWZhdWx0IiwiZ2V0QXR0cmlidXRlIiwiZm9yRWFjaCIsInBhZ2UiLCJoZWFkZXIiLCJidWZmZXIiLCJkb2NrZWQiLCJ1cGRhdGUiLCJ0b2dnbGUiLCJmbGlwTm9kZSIsImdldEZsaXBIYW5kbGVyIiwidW5mbGlwTm9kZSIsImdldFVuZmxpcEhhbmRsZXIiLCJtYXBOb2RlIiwiZ2V0RWxlbWVudEJ5SWQiLCJjb25maWciLCJKU09OIiwicGFyc2UiLCJrZXkiLCJfSlNPTiRwYXJzZSIsInBvc2l0aW9uIiwibWFya2VyIiwiaW5pdCIsImdvb2dsZSIsIm1hcHMiLCJNYXAiLCJNYXJrZXIiLCJpbml0TWFwIiwiYXBwZW5kQ2hpbGQiLCJ0YWciLCJzZXRBdHRyaWJ1dGUiLCJnZXRTY3JpcHRUYWciLCJjb25zb2xlIiwibG9nIl0sIm1hcHBpbmdzIjoieUJBRUEsU0FBU0EsRUFBUUMsRUFBTUMsRUFBU0MsRUFBSUMsRUFBU0MsWUE2QmxDQyxFQUFTQyxNQUNaQyxTQUNLSCxFQUNMLElBQUlJLE1BQU0sb0JBQ1ZQLEVBQVFELFFBSVJTLEdBQU8sSUFBSUMsS0FDWEMsRUFBT0MsS0FBS0MsSUFBSSxHQUFLSixFQUFNSyxHQUFTQyxHQUNwQ0MsRUFBUUMsRUFBS04sS0FFVFgsR0FBU2dCLEdBQVNkLEVBQUtnQixHQUFTQSxFQUU3QkMsSUFBSixFQUFRZCxFQUFlLGFBQ25CLEtBQU1KLEVBQVFELFVBM0N2QmMsR0FBUyxJQUFJSixLQUNiUSxFQUFPakIsRUFBUUQsR0FDZk8sR0FBWSxFQUVaVSxFQUFPRyxFQUNQTCxFQUFXLFVBRVEsbUJBQVpaLElBQ0VBLFFBR0RBLE9BQ0tjLE1BQVFBLElBQ1pkLEVBQVFZLFVBQVlBLElBQ3BCWCxHQUFZLGNBR3JCYyxJQUFTaEIsRUFDSkUsRUFDTCxJQUFJSSxNQUFNLDZDQUNWUCxFQUFRRCxPQTJCUkssaUJBdEJVLElBMkJoQixTQUFTZSxFQUFXQyxTQUNYLElBQU0sRUFBSVQsS0FBS1UsSUFBSVYsS0FBS1csR0FBS0YsSUN4RHRDLElBQUFHLEVBQUEsU0FBZ0JDLE9BQ1JDLEVBQU0sSUFBSUMsZUFDWkMsRUFBZSxzQkFFZkMsS0FBSyxNQUFPSixHQUFLLFNBR2IsU0FBQ0ssWUFDREMsT0FBUyxZQUNTQyxLQUFLQyxPQUFTLEtBQU9ELEtBQUtDLFFBQVUsTUFDbkNMLEdBQWNBLEVBQWFJLFFBQzdDQSxLQUFLRSxhQUdOQyxRQUFVUCxJQUNWUSxjQUdLLFNBQUNDLEtBQTZCQSxPQ2hCN0NiLEVBQU0sNEJBQ0hjLEtBQUssU0FBQUMsT0FDQUMsRUFBU0MsU0FBU0MsY0FBYyxZQUM3QkMsTUFBTUMsUUFBVSxTQUNoQkMsVUFBWU4sV0FDVk8sS0FBS0MsYUFBYVAsRUFBUUMsU0FBU0ssS0FBS0UsU0FBUyxNQUUzREMsTUFBTSxTQUFBQyxXQUNHQyxLQUFLLHlDQUEwQ0QsU0NIM0RFLEVBUGEsU0FBQ0MsVUFBREMsVUFBQUMsT0FBQSxRQUFBQyxJQUFBRixVQUFBLEdBQUFBLFVBQUEsR0FBZ0JiLFVBQ3JCZ0IsY0FBY0osSUFNdEJELEVBSmdCLFNBQUNDLE9BQU9LLEVBQVJKLFVBQUFDLE9BQUEsUUFBQUMsSUFBQUYsVUFBQSxHQUFBQSxVQUFBLEdBQWdCYixnSkFDMUJpQixFQUFNQyxpQkFBaUJOLE1DRnZCTyxFQUFRUixFQUFTLGdCQUNuQlMsRUFBUSxFQUVOQyxFQUFTVixFQUFZLGdCQUN4QlcsSUFBSSxTQUFDQyxFQUFNQyxVQUNMQSxFQUNBRCxFQUFLRSxVQUFVQyxPQUFPLGdCQURuQkgsRUFBS0UsVUFBVUUsSUFBSSxnQkFFcEJKLElBR0xLLEVBQWEsYUFDVlIsR0FBT0ssVUFBVUMsT0FBTyxrQkFDdEJOLEVBQVEsSUFBTUMsRUFBT1AsT0FBVSxFQUFJTSxFQUFRLElBQzdDQSxHQUFPSyxVQUFVRSxJQUFJLGtCQUN0QkYsVUFBVUUsSUFBSSxZQUd0QlIsRUFBTVUsaUJBQWlCLGdCQUFpQixhQUNoQ0osVUFBVUMsT0FBTyxzQkFDWkUsRUFBWSxPQUd6QkUsV0FBVyxhQUNITCxVQUFVRSxJQUFJLFlBQ25CLGdIQ2RISSxFQVZzQixvQkFBWEMsT0FDREEsWUFDbUIsSUFBWEMsRUFDUkEsRUFDaUIsb0JBQVRDLEtBQ1JBLG1KQ0ROQyxFQUFVRixFQUFPRyx1QkFDaEJILEVBQU9JLDZCQUNQSixFQUFPSyxtQ0FJT0MsT0FDYkMsR0FBUSxJQUFJdkUsS0FDWndFLEVBQUt0RSxLQUFLdUUsSUFBSSxFQUFHLElBQU1GLEVBQU9HLElBQzlCQyxFQUFNZCxXQUFXUyxFQUFJRSxVQUNsQkUsRUFBT0gsRUFBTUksR0FMbEJELEdBQVEsSUFBSTFFLEtBWVo0RSxFQUFTWixFQUFPYSxzQkFDZmIsRUFBT2MsNEJBQ1BkLEVBQU9lLHlCQUNQQyxhQUVEQyxTQUFTQyxVQUFVQyxTQUNYakIsRUFBUWlCLEtBQUtuQixLQUNkWSxFQUFPTyxLQUFLbkIsS0FHYm9CLEVBQUFBLFFBQWlCbEIsVUFDVlUsaUZOeUJqQlMsRUFDTyxTQUFVOUYsRUFBU0MsRUFBSUMsRUFBU0MsVUFDNUJMLEVBQU8sWUFBYUUsRUFBU0MsRUFBSUMsRUFBU0MsSU92RC9DNEYsRUFBZ0IsU0FBQ0MsVUFDckJ4RCxTQUFTeUQsZ0JBQWdCQyxVQUFZL0MsRUFBUzZDLEdBQUlHLHdCQUF3QkMsSUFIMUVqRCxFQUFTLGlCQUFpQmtELGNBS3RCQyxFQUFnQixTQUFTQyxLQUMzQkMsbUJBQ1NoRSxTQUFTeUQsZ0JBQWlCRixFQUFjaEUsS0FBSzBFLGFBQWEsVUFBWTNGLFNBQVUsT0FHN0ZxQyxFQUFZLG9CQUNUdUQsUUFBUSxTQUFBM0MsS0FDRk0saUJBQWlCLFFBQVNpQyxLQ2RuQyxJQUFNSyxFQUFPbkUsU0FBU3lELGdCQUNoQlcsRUFBU3pELEVBQVMsaUJBQ3BCckQsT0FBQUEsRUFBUStHLE9BQUFBLEVBQVFDLE9BQUFBLEVBR2RDLEVBQVMsWUFDRmpILEVBQVMsS0FBT2dILEdBQ2RoSCxHQUFVLElBQU1nSCxLQUVUQSxFQUFTRixFQUFPM0MsVUFBVStDLE9BQU8sc0JBQzVDLEdBU1h4QyxPQUFPSCxpQkFBaUIsU0FORixXQUNmd0MsR0FBUWpDLHNCQUFzQm1DLE1BQzFCLElBQ0FKLEVBQUtULFlDYmhCL0MsRUFBWSxlQUNUdUQsUUFBUSxTQUFBM0MsS0FDSyxtQkFBb0JBLEdBQzdCMkMsUUFBUSxTQUFBTyxLQUNFNUMsaUJBQWlCLFFBUFgsU0FBQ04sVUFBUyxrQkFBTUEsRUFBS0UsVUFBVUUsSUFBSSxlQU9mK0MsQ0FBZW5ELFFBRzFDLHFCQUFzQkEsR0FDL0IyQyxRQUFRLFNBQUFTLEtBQ0k5QyxpQkFBaUIsUUFYWCxTQUFDTixVQUFTLGtCQUFNQSxFQUFLRSxVQUFVQyxPQUFPLGVBV2xCa0QsQ0FBaUJyRCxRQ1o5RCxJQUFNc0QsRUFBVTdFLFNBQVM4RSxlQUFlLE9BVXBDRCxLQUNJLGdDQUNIaEYsS0FBSyxTQUFBa0YsU0FDcUNDLEtBQUtDLE1BQU1GLEdBQTlDRyxFQURRQyxFQUNSRCxJQUFLeEgsRUFER3lILEVBQ0h6SCxRQUFpQjBILEVBRGRELEVBQ01FLE9BRWRDLEVBQ0Msa0JBQU0sSUFBSUMsT0FBT0MsS0FBS0MsSUFBSVosRUFBU25ILElBRHBDNEgsRUFFSSxTQUFDaEUsVUFBUSxJQUFJaUUsT0FBT0MsS0FBS0UsUUFBU04sU0FBQUEsRUFBVTlELElBQUFBLFlBRy9DcUUsUUFBVSxhQUNITCxlQUdMakYsS0FBS3VGLFlBdEJDLFNBQUNWLE9BQ2hCVyxFQUFNN0YsU0FBU0MsY0FBYyxtQkFDN0I2RixhQUFhLFFBQVMsTUFDdEJBLGFBQWEsUUFBUyxNQUN0QkEsYUFBYSxNQUFqQiwrQ0FBdUVaLEVBQXZFLHFCQUNPVyxFQWlCdUJFLENBQWFiLE1BRXhDMUUsTUFBTSxTQUFBQyxVQUFPdUYsUUFBUUMsSUFBSXhGIiwiZmlsZSI6InNpdGUuanMiLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgcmFmID0gcmVxdWlyZSgncmFmbCcpXG5cbmZ1bmN0aW9uIHNjcm9sbCAocHJvcCwgZWxlbWVudCwgdG8sIG9wdGlvbnMsIGNhbGxiYWNrKSB7XG4gIHZhciBzdGFydCA9ICtuZXcgRGF0ZVxuICB2YXIgZnJvbSA9IGVsZW1lbnRbcHJvcF1cbiAgdmFyIGNhbmNlbGxlZCA9IGZhbHNlXG5cbiAgdmFyIGVhc2UgPSBpbk91dFNpbmVcbiAgdmFyIGR1cmF0aW9uID0gMzUwXG5cbiAgaWYgKHR5cGVvZiBvcHRpb25zID09PSAnZnVuY3Rpb24nKSB7XG4gICAgY2FsbGJhY2sgPSBvcHRpb25zXG4gIH1cbiAgZWxzZSB7XG4gICAgb3B0aW9ucyA9IG9wdGlvbnMgfHwge31cbiAgICBlYXNlID0gb3B0aW9ucy5lYXNlIHx8IGVhc2VcbiAgICBkdXJhdGlvbiA9IG9wdGlvbnMuZHVyYXRpb24gfHwgZHVyYXRpb25cbiAgICBjYWxsYmFjayA9IGNhbGxiYWNrIHx8IGZ1bmN0aW9uICgpIHt9XG4gIH1cblxuICBpZiAoZnJvbSA9PT0gdG8pIHtcbiAgICByZXR1cm4gY2FsbGJhY2soXG4gICAgICBuZXcgRXJyb3IoJ0VsZW1lbnQgYWxyZWFkeSBhdCB0YXJnZXQgc2Nyb2xsIHBvc2l0aW9uJyksXG4gICAgICBlbGVtZW50W3Byb3BdXG4gICAgKVxuICB9XG5cbiAgZnVuY3Rpb24gY2FuY2VsICgpIHtcbiAgICBjYW5jZWxsZWQgPSB0cnVlXG4gIH1cblxuICBmdW5jdGlvbiBhbmltYXRlICh0aW1lc3RhbXApIHtcbiAgICBpZiAoY2FuY2VsbGVkKSB7XG4gICAgICByZXR1cm4gY2FsbGJhY2soXG4gICAgICAgIG5ldyBFcnJvcignU2Nyb2xsIGNhbmNlbGxlZCcpLFxuICAgICAgICBlbGVtZW50W3Byb3BdXG4gICAgICApXG4gICAgfVxuXG4gICAgdmFyIG5vdyA9ICtuZXcgRGF0ZVxuICAgIHZhciB0aW1lID0gTWF0aC5taW4oMSwgKChub3cgLSBzdGFydCkgLyBkdXJhdGlvbikpXG4gICAgdmFyIGVhc2VkID0gZWFzZSh0aW1lKVxuXG4gICAgZWxlbWVudFtwcm9wXSA9IChlYXNlZCAqICh0byAtIGZyb20pKSArIGZyb21cblxuICAgIHRpbWUgPCAxID8gcmFmKGFuaW1hdGUpIDogcmFmKGZ1bmN0aW9uICgpIHtcbiAgICAgIGNhbGxiYWNrKG51bGwsIGVsZW1lbnRbcHJvcF0pXG4gICAgfSlcbiAgfVxuXG4gIHJhZihhbmltYXRlKVxuXG4gIHJldHVybiBjYW5jZWxcbn1cblxuZnVuY3Rpb24gaW5PdXRTaW5lIChuKSB7XG4gIHJldHVybiAuNSAqICgxIC0gTWF0aC5jb3MoTWF0aC5QSSAqIG4pKVxufVxuXG5tb2R1bGUuZXhwb3J0cyA9IHtcbiAgdG9wOiBmdW5jdGlvbiAoZWxlbWVudCwgdG8sIG9wdGlvbnMsIGNhbGxiYWNrKSB7XG4gICAgcmV0dXJuIHNjcm9sbCgnc2Nyb2xsVG9wJywgZWxlbWVudCwgdG8sIG9wdGlvbnMsIGNhbGxiYWNrKVxuICB9LFxuICBsZWZ0OiBmdW5jdGlvbiAoZWxlbWVudCwgdG8sIG9wdGlvbnMsIGNhbGxiYWNrKSB7XG4gICAgcmV0dXJuIHNjcm9sbCgnc2Nyb2xsTGVmdCcsIGVsZW1lbnQsIHRvLCBvcHRpb25zLCBjYWxsYmFjaylcbiAgfVxufVxuIiwiZXhwb3J0IGRlZmF1bHQgKHVyaSkgPT4ge1xuICBjb25zdCB4aHIgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKVxuICBsZXQgZXJyb3JIYW5kbGVyID0gKCkgPT4ge31cblxuICB4aHIub3BlbignR0VUJywgdXJpLCB0cnVlKVxuXG4gIHJldHVybiB7XG4gICAgdGhlbjogKGNiKSA9PiB7XG4gICAgICB4aHIub25sb2FkID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIGxldCB2YWxpZFJlc3BvbnNlID0gdGhpcy5zdGF0dXMgPCAyMDAgfHwgdGhpcy5zdGF0dXMgPj0gNDAwXG4gICAgICAgIGlmICh2YWxpZFJlc3BvbnNlICYmIGVycm9ySGFuZGxlcikgZXJyb3JIYW5kbGVyKHRoaXMpXG4gICAgICAgIGNiKHRoaXMucmVzcG9uc2UpXG4gICAgICB9XG5cbiAgICAgIHhoci5vbmVycm9yID0gZXJyb3JIYW5kbGVyXG4gICAgICB4aHIuc2VuZCgpXG5cbiAgICAgIHJldHVybiB7XG4gICAgICAgIGNhdGNoOiAoaGFuZGxlcikgPT4geyBlcnJvckhhbmRsZXIgPSBoYW5kbGVyIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cbn1cbiIsImltcG9ydCBmZXRjaCBmcm9tICcuL2ZldGNoJ1xuXG5mZXRjaCgnL2Fzc2V0cy9pY29ucy9zcHJpdGUuc3ZnJylcbiAgLnRoZW4oc3ByaXRlID0+IHtcbiAgICBsZXQgZmlndXJlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZmlndXJlJylcbiAgICBmaWd1cmUuc3R5bGUuZGlzcGxheSA9ICdub25lJ1xuICAgIGZpZ3VyZS5pbm5lckhUTUwgPSBzcHJpdGVcbiAgICBkb2N1bWVudC5ib2R5Lmluc2VydEJlZm9yZShmaWd1cmUsIGRvY3VtZW50LmJvZHkuY2hpbGRyZW5bMF0pXG4gIH0pXG4gIC5jYXRjaChlcnIgPT4ge1xuICAgIGNvbnNvbGUud2FybignSWNvbiBzcHJpdGVzaGVldCBjb3VsZCBub3QgYmUgbG9hZGVkXFxuJywgZXJyKVxuICB9KVxuIiwiY29uc3QgZmluZCA9IChxdWVyeSwgc2NvcGUgPSBkb2N1bWVudCkgPT5cbiAgc2NvcGUucXVlcnlTZWxlY3RvcihxdWVyeSlcblxuY29uc3QgZmluZEFsbCA9IChxdWVyeSwgc2NvcGUgPSBkb2N1bWVudCkgPT5cbiAgWy4uLnNjb3BlLnF1ZXJ5U2VsZWN0b3JBbGwocXVlcnkpXVxuXG5cbmV4cG9ydCBkZWZhdWx0IHsgZmluZCwgZmluZEFsbCB9XG4iLCJpbXBvcnQgZG9tIGZyb20gJy4vZG9tLWhlbHBlcnMnXG5cbmNvbnN0IHRpbWVyID0gZG9tLmZpbmQoJ1tkYXRhLXRpbWVyXScpXG5sZXQgaW5kZXggPSAwXG5cbmNvbnN0IHNsaWRlcyA9IGRvbS5maW5kQWxsKCdbZGF0YS1zbGlkZV0nKVxuICAubWFwKChub2RlLCBpKSA9PiB7XG4gICAgaWYgKCFpKSBub2RlLmNsYXNzTGlzdC5hZGQoJ2FjdGl2ZS1zbGlkZScpXG4gICAgZWxzZSBub2RlLmNsYXNzTGlzdC5yZW1vdmUoJ2FjdGl2ZS1zbGlkZScpXG4gICAgcmV0dXJuIG5vZGVcbiAgfSlcblxuY29uc3Qgc3dhcFNsaWRlcyA9ICgpID0+IHtcbiAgc2xpZGVzW2luZGV4XS5jbGFzc0xpc3QucmVtb3ZlKCdhY3RpdmUtc2xpZGUnKVxuICBpbmRleCA9IChpbmRleCArIDEgPT09IHNsaWRlcy5sZW5ndGgpID8gMCA6IGluZGV4ICsgMVxuICBzbGlkZXNbaW5kZXhdLmNsYXNzTGlzdC5hZGQoJ2FjdGl2ZS1zbGlkZScpXG4gIHRpbWVyLmNsYXNzTGlzdC5hZGQoJ3J1bm5pbmcnKVxufVxuXG50aW1lci5hZGRFdmVudExpc3RlbmVyKCd0cmFuc2l0aW9uZW5kJywgKCkgPT4ge1xuICB0aW1lci5jbGFzc0xpc3QucmVtb3ZlKCdydW5uaW5nJylcbiAgc2V0VGltZW91dChzd2FwU2xpZGVzLCAxMjUpXG59KVxuXG5zZXRUaW1lb3V0KCgpID0+IHtcbiAgdGltZXIuY2xhc3NMaXN0LmFkZCgncnVubmluZycpXG59LCAyNTApXG4iLCJ2YXIgd2luO1xuXG5pZiAodHlwZW9mIHdpbmRvdyAhPT0gXCJ1bmRlZmluZWRcIikge1xuICAgIHdpbiA9IHdpbmRvdztcbn0gZWxzZSBpZiAodHlwZW9mIGdsb2JhbCAhPT0gXCJ1bmRlZmluZWRcIikge1xuICAgIHdpbiA9IGdsb2JhbDtcbn0gZWxzZSBpZiAodHlwZW9mIHNlbGYgIT09IFwidW5kZWZpbmVkXCIpe1xuICAgIHdpbiA9IHNlbGY7XG59IGVsc2Uge1xuICAgIHdpbiA9IHt9O1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IHdpbjtcbiIsInZhciBnbG9iYWwgPSByZXF1aXJlKCdnbG9iYWwnKVxuXG4vKipcbiAqIGByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKWBcbiAqL1xuXG52YXIgcmVxdWVzdCA9IGdsb2JhbC5yZXF1ZXN0QW5pbWF0aW9uRnJhbWVcbiAgfHwgZ2xvYmFsLndlYmtpdFJlcXVlc3RBbmltYXRpb25GcmFtZVxuICB8fCBnbG9iYWwubW96UmVxdWVzdEFuaW1hdGlvbkZyYW1lXG4gIHx8IGZhbGxiYWNrXG5cbnZhciBwcmV2ID0gK25ldyBEYXRlXG5mdW5jdGlvbiBmYWxsYmFjayAoZm4pIHtcbiAgdmFyIGN1cnIgPSArbmV3IERhdGVcbiAgdmFyIG1zID0gTWF0aC5tYXgoMCwgMTYgLSAoY3VyciAtIHByZXYpKVxuICB2YXIgcmVxID0gc2V0VGltZW91dChmbiwgbXMpXG4gIHJldHVybiBwcmV2ID0gY3VyciwgcmVxXG59XG5cbi8qKlxuICogYGNhbmNlbEFuaW1hdGlvbkZyYW1lKClgXG4gKi9cblxudmFyIGNhbmNlbCA9IGdsb2JhbC5jYW5jZWxBbmltYXRpb25GcmFtZVxuICB8fCBnbG9iYWwud2Via2l0Q2FuY2VsQW5pbWF0aW9uRnJhbWVcbiAgfHwgZ2xvYmFsLm1vekNhbmNlbEFuaW1hdGlvbkZyYW1lXG4gIHx8IGNsZWFyVGltZW91dFxuXG5pZiAoRnVuY3Rpb24ucHJvdG90eXBlLmJpbmQpIHtcbiAgcmVxdWVzdCA9IHJlcXVlc3QuYmluZChnbG9iYWwpXG4gIGNhbmNlbCA9IGNhbmNlbC5iaW5kKGdsb2JhbClcbn1cblxuZXhwb3J0cyA9IG1vZHVsZS5leHBvcnRzID0gcmVxdWVzdFxuZXhwb3J0cy5jYW5jZWwgPSBjYW5jZWxcbiIsImltcG9ydCBzY3JvbGwgZnJvbSAnc2Nyb2xsJ1xuaW1wb3J0IGRvbSBmcm9tICcuL2RvbS1oZWxwZXJzJ1xuXG5jb25zdCBuYXZIZWlnaHQgPSAoKSA9PlxuICBkb20uZmluZCgnW2RhdGEtaGVhZGVyXScpLmNsaWVudEhlaWdodFxuXG5jb25zdCByZXNvbHZlVGFyZ2V0ID0gKGlkKSA9PlxuICBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc2Nyb2xsVG9wICsgZG9tLmZpbmQoaWQpLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLnRvcCAtIG5hdkhlaWdodCgpXG5cbmNvbnN0IHNjcm9sbEhhbmRsZXIgPSBmdW5jdGlvbihlKSB7XG4gIGUucHJldmVudERlZmF1bHQoKVxuICBzY3JvbGwudG9wKGRvY3VtZW50LmRvY3VtZW50RWxlbWVudCwgcmVzb2x2ZVRhcmdldCh0aGlzLmdldEF0dHJpYnV0ZSgnaHJlZicpKSwgeyBkdXJhdGlvbjogNTAwIH0pXG59XG5cbmRvbS5maW5kQWxsKCdbZGF0YS1zY3JvbGwtdG9dJylcbiAgLmZvckVhY2gobm9kZSA9PiB7XG4gICAgbm9kZS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHNjcm9sbEhhbmRsZXIpXG4gIH0pXG4iLCJpbXBvcnQgZG9tIGZyb20gJy4vZG9tLWhlbHBlcnMnXG5cbmNvbnN0IHBhZ2UgPSBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnRcbmNvbnN0IGhlYWRlciA9IGRvbS5maW5kKCdbZGF0YS1oZWFkZXJdJylcbmxldCBzY3JvbGwsIGJ1ZmZlciwgZG9ja2VkXG5cblxuY29uc3QgdXBkYXRlID0gKCkgPT4ge1xuICBsZXQgZG9jayA9IHNjcm9sbCA+IDEwICYmICFkb2NrZWRcbiAgbGV0IHVuZG9jayA9IHNjcm9sbCA8PSAxMCAmJiBkb2NrZWRcblxuICBpZiAoZG9jayB8fCB1bmRvY2spIGRvY2tlZCA9IGhlYWRlci5jbGFzc0xpc3QudG9nZ2xlKCdoZWFkZXItLWRvY2tlZCcpXG4gIGJ1ZmZlciA9IGZhbHNlXG59XG5cbmNvbnN0IHJlcXVlc3RVcGRhdGUgPSAoKSA9PiB7XG4gIGlmICghYnVmZmVyKSByZXF1ZXN0QW5pbWF0aW9uRnJhbWUodXBkYXRlKVxuICBidWZmZXIgPSB0cnVlXG4gIHNjcm9sbCA9IHBhZ2Uuc2Nyb2xsVG9wXG59XG5cbndpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdzY3JvbGwnLCByZXF1ZXN0VXBkYXRlKVxuIiwiaW1wb3J0IGRvbSBmcm9tICcuL2RvbS1oZWxwZXJzJ1xuXG5jb25zdCBnZXRGbGlwSGFuZGxlciA9IChub2RlKSA9PiAoKSA9PiBub2RlLmNsYXNzTGlzdC5hZGQoJ2NhcmQtLWZsaXAnKVxuY29uc3QgZ2V0VW5mbGlwSGFuZGxlciA9IChub2RlKSA9PiAoKSA9PiBub2RlLmNsYXNzTGlzdC5yZW1vdmUoJ2NhcmQtLWZsaXAnKVxuXG5kb20uZmluZEFsbCgnW2RhdGEtY2FyZF0nKVxuICAuZm9yRWFjaChub2RlID0+IHtcbiAgICBkb20uZmluZEFsbCgnW2RhdGEtY2FyZC1mbGlwXScsIG5vZGUpXG4gICAgICAuZm9yRWFjaChmbGlwTm9kZSA9PiB7XG4gICAgICAgIGZsaXBOb2RlLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZ2V0RmxpcEhhbmRsZXIobm9kZSkpXG4gICAgICB9KVxuXG4gICAgZG9tLmZpbmRBbGwoJ1tkYXRhLWNhcmQtdW5mbGlwXScsIG5vZGUpXG4gICAgICAuZm9yRWFjaCh1bmZsaXBOb2RlID0+IHtcbiAgICAgICAgdW5mbGlwTm9kZS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGdldFVuZmxpcEhhbmRsZXIobm9kZSkpXG4gICAgICB9KVxuICB9KVxuIiwiaW1wb3J0IGZldGNoIGZyb20gJy4vZmV0Y2gnXG5cbmNvbnN0IG1hcE5vZGUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbWFwJylcblxuY29uc3QgZ2V0U2NyaXB0VGFnID0gKGtleSkgPT4ge1xuICBsZXQgdGFnID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc2NyaXB0JylcbiAgdGFnLnNldEF0dHJpYnV0ZSgnYXN5bmMnLCAnJylcbiAgdGFnLnNldEF0dHJpYnV0ZSgnZGVmZXInLCAnJylcbiAgdGFnLnNldEF0dHJpYnV0ZSgnc3JjJywgYGh0dHBzOi8vbWFwcy5nb29nbGVhcGlzLmNvbS9tYXBzL2FwaS9qcz9rZXk9JHtrZXl9JmNhbGxiYWNrPWluaXRNYXBgKVxuICByZXR1cm4gdGFnXG59XG5cbmlmIChtYXBOb2RlKSB7XG4gIGZldGNoKCcvYXNzZXRzL2RhdGEvbWFwLWNvbmZpZy5qc29uJylcbiAgICAudGhlbihjb25maWcgPT4ge1xuICAgICAgbGV0IHsga2V5LCBvcHRpb25zLCBtYXJrZXI6IHBvc2l0aW9uIH0gPSBKU09OLnBhcnNlKGNvbmZpZylcblxuICAgICAgY29uc3QgaW5pdCA9IHtcbiAgICAgICAgbWFwOiAoKSA9PiBuZXcgZ29vZ2xlLm1hcHMuTWFwKG1hcE5vZGUsIG9wdGlvbnMpLFxuICAgICAgICBtYXJrZXI6IChtYXApID0+IG5ldyBnb29nbGUubWFwcy5NYXJrZXIoeyBwb3NpdGlvbiwgbWFwIH0pXG4gICAgICB9XG5cbiAgICAgIHdpbmRvdy5pbml0TWFwID0gKCkgPT4ge1xuICAgICAgICBpbml0Lm1hcmtlcihpbml0Lm1hcCgpKVxuICAgICAgfVxuXG4gICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGdldFNjcmlwdFRhZyhrZXkpKVxuICAgIH0pXG4gICAgLmNhdGNoKGVyciA9PiBjb25zb2xlLmxvZyhlcnIpKVxufVxuIl19
