!function(){"use strict";function n(n,t,r,o,i){function a(e){if(s)return i(new Error("Scroll cancelled"),t[n]);var o=+new Date,f=Math.min(1,(o-c)/u),p=d(f);t[n]=p*(r-l)+l,g(f<1?a:function(){i(null,t[n])})}var c=+new Date,l=t[n],s=!1,d=e,u=350;return"function"==typeof o?i=o:(d=(o=o||{}).ease||d,u=o.duration||u,i=i||function(){}),l===r?i(new Error("Element already at target scroll position"),t[n]):(g(a),function(){s=!0})}function e(n){return.5*(1-Math.cos(Math.PI*n))}var t=function(n){var e=new XMLHttpRequest,t=function(){};return e.open("GET",n,!0),{then:function(n){return e.onload=function(){(this.status<200||this.status>=400)&&t&&t(this),n(this.response)},e.onerror=t,e.send(),{catch:function(n){t=n}}}}};t("/assets/icons/sprite.svg").then(function(n){var e=document.createElement("figure");e.style.display="none",e.innerHTML=n,document.body.insertBefore(e,document.body.children[0])}).catch(function(n){console.warn("Icon spritesheet could not be loaded\n",n)});var r=function(){return function(n,e){if(Array.isArray(n))return n;if(Symbol.iterator in Object(n))return function(n,e){var t=[],r=!0,o=!1,i=void 0;try{for(var a,c=n[Symbol.iterator]();!(r=(a=c.next()).done)&&(t.push(a.value),!e||t.length!==e);r=!0);}catch(n){o=!0,i=n}finally{try{!r&&c.return&&c.return()}finally{if(o)throw i}}return t}(n,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),o=document.scrollingElement||document.documentElement,i={scrollBox:o,find:function(n){return(arguments.length>1&&void 0!==arguments[1]?arguments[1]:document).querySelector(n)},findAll:function(n){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:document;return[].concat(function(n){if(Array.isArray(n)){for(var e=0,t=Array(n.length);e<n.length;e++)t[e]=n[e];return t}return Array.from(n)}(e.querySelectorAll(n)))},get scrollTop(){return o.scrollTop}},a=i.find("[data-timer]"),c=0,l=i.findAll("[data-slide]").map(function(n,e){return e?n.classList.remove("active-slide"):n.classList.add("active-slide"),n}),s=function(){l[c].classList.remove("active-slide"),c=c+1===l.length?0:c+1,l[c].classList.add("active-slide"),a.classList.add("running")};a.addEventListener("transitionend",function(){a.classList.remove("running"),setTimeout(s,125)}),setTimeout(function(){a.classList.add("running")},250);var d="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},u="undefined"!=typeof window?window:void 0!==d?d:"undefined"!=typeof self?self:{},f=Object.freeze({default:u,__moduleExports:u}),p=f&&u||f,m=function(n,e){return e={exports:{}},n(e,e.exports),e.exports}(function(n,e){var t=p.requestAnimationFrame||p.webkitRequestAnimationFrame||p.mozRequestAnimationFrame||function(n){var e=+new Date,t=Math.max(0,16-(e-r)),o=setTimeout(n,t);return r=e,o},r=+new Date,o=p.cancelAnimationFrame||p.webkitCancelAnimationFrame||p.mozCancelAnimationFrame||clearTimeout;Function.prototype.bind&&(t=t.bind(p),o=o.bind(p)),(n.exports=t).cancel=o}),h=m.cancel,v=Object.freeze({default:m,__moduleExports:m,cancel:h}),g=v&&m||v,y=function(e,t,r,o){return n("scrollTop",e,t,r,o)},w=function(n){return i.scrollTop+i.find(n).getBoundingClientRect().top-i.find("[data-header]").clientHeight},b=function(n){n.preventDefault(),y(i.scrollBox,w(this.getAttribute("href")),{duration:500})};i.findAll("[data-scroll-to]").forEach(function(n){n.addEventListener("click",b)});var E=i.find("[data-header]"),A=void 0,L=void 0,k=void 0,T=function(){(A>10&&!k||A<=10&&k)&&(k=E.classList.toggle("header--docked")),L=!1},x=function(){L||requestAnimationFrame(T),L=!0,A=i.scrollTop};x(),window.addEventListener("scroll",x);i.findAll("[data-card]").forEach(function(n){(function(n){var e=r(n,2),t=e[0],o=e[1];return t.clientHeight<o.clientHeight?t:o})(n.children).style.position="absolute",i.findAll("[data-card-flip]",n).forEach(function(e){e.addEventListener("click",function(n){return function(){return n.classList.add("card--flip")}}(n))}),i.findAll("[data-card-unflip]",n).forEach(function(e){e.addEventListener("click",function(n){return function(){return n.classList.remove("card--flip")}}(n))})});var M=document.getElementById("map");M&&t("/assets/data/map-config.json").then(function(n){var e=JSON.parse(n),t=e.key,r=e.options,o=e.marker,i=function(){return new google.maps.Map(M,r)},a=function(n){return new google.maps.Marker({position:o,map:n,icon:"/assets/media/logo/llb-map.png"})};window.initMap=function(){a(i())},document.body.appendChild(function(n){var e=document.createElement("script");return e.setAttribute("async",""),e.setAttribute("defer",""),e.setAttribute("src","https://maps.googleapis.com/maps/api/js?key="+n+"&callback=initMap"),e}(t))}).catch(function(n){return console.log(n)});var F=new Date;i.findAll("time[data-year]").forEach(function(n){n.innerHTML+=F.getFullYear()});var q=i.find("[data-header]");i.find("[data-burger]",q).addEventListener("click",function(){q.classList.toggle("header--open"),document.body.classList.toggle("noscroll")}),i.findAll("[data-scroll-to]").forEach(function(n){n.addEventListener("click",function(){q.classList.remove("header--open"),document.body.classList.remove("noscroll")})});var D={origin:window.location.host.replace(/\//g,""),subject:"Nouveau contact",recipient:"dev@udy.io"},S=i.find("[data-contact-form]");S&&S.addEventListener("submit",function(n){n.preventDefault();new XMLHttpRequest,i.find("[data-attachment]",S);var e=new FormData;Object.keys(D).forEach(function(n){return e.append(n,D[n])}),i.findAll("[data-field]",S).forEach(function(n){return e.append(n.dataset.field,n.value)}),fileInput&&e.append("attachment",fileInput.files[0]),xhr.open("POST","/inc/mailto/mailto.php",!0),xhr.addEventListener("load",function(){console.log(JSON.parse(this.response))}),xhr.send(e)})}();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9zY3JvbGwvaW5kZXguanMiLCJzY3JpcHRzL21vZHVsZXMvZmV0Y2guanMiLCJzY3JpcHRzL21vZHVsZXMvaWNvbi1zcHJpdGUuanMiLCJzY3JpcHRzL21vZHVsZXMvZG9tLWhlbHBlcnMuanMiLCJzY3JpcHRzL21vZHVsZXMvc2xpZGVyLmpzIiwibm9kZV9tb2R1bGVzL2dsb2JhbC93aW5kb3cuanMiLCJub2RlX21vZHVsZXMvcmFmbC9pbmRleC5qcyIsInNjcmlwdHMvbW9kdWxlcy9zY3JvbGwtdG8uanMiLCJzY3JpcHRzL21vZHVsZXMvZG9jay1oZWFkZXIuanMiLCJzY3JpcHRzL21vZHVsZXMvY2FyZC1mbGlwLmpzIiwic2NyaXB0cy9tb2R1bGVzL2dvb2dsZS1tYXAuanMiLCJzY3JpcHRzL21vZHVsZXMvZGF0ZXRpbWUtb3V0cHV0LmpzIiwic2NyaXB0cy9tb2R1bGVzL21vYmlsZS1tZW51LmpzIiwic2NyaXB0cy9tb2R1bGVzL2NvbnRhY3QtZm9ybS5qcyJdLCJuYW1lcyI6WyJzY3JvbGwiLCJwcm9wIiwiZWxlbWVudCIsInRvIiwib3B0aW9ucyIsImNhbGxiYWNrIiwiYW5pbWF0ZSIsInRpbWVzdGFtcCIsImNhbmNlbGxlZCIsIkVycm9yIiwibm93IiwiRGF0ZSIsInRpbWUiLCJNYXRoIiwibWluIiwic3RhcnQiLCJkdXJhdGlvbiIsImVhc2VkIiwiZWFzZSIsImZyb20iLCJyYWYiLCJpbk91dFNpbmUiLCJuIiwiY29zIiwiUEkiLCJmZXRjaCIsInVyaSIsInhociIsIlhNTEh0dHBSZXF1ZXN0IiwiZXJyb3JIYW5kbGVyIiwib3BlbiIsImNiIiwib25sb2FkIiwidGhpcyIsInN0YXR1cyIsInJlc3BvbnNlIiwib25lcnJvciIsInNlbmQiLCJoYW5kbGVyIiwidGhlbiIsInNwcml0ZSIsImZpZ3VyZSIsImRvY3VtZW50IiwiY3JlYXRlRWxlbWVudCIsInN0eWxlIiwiZGlzcGxheSIsImlubmVySFRNTCIsImJvZHkiLCJpbnNlcnRCZWZvcmUiLCJjaGlsZHJlbiIsImNhdGNoIiwiZXJyIiwid2FybiIsInNjcm9sbEJveCIsInNjcm9sbGluZ0VsZW1lbnQiLCJkb2N1bWVudEVsZW1lbnQiLCJkb20iLCJxdWVyeSIsImFyZ3VtZW50cyIsImxlbmd0aCIsInVuZGVmaW5lZCIsInF1ZXJ5U2VsZWN0b3IiLCJzY29wZSIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJzY3JvbGxUb3AiLCJ0aW1lciIsImZpbmQiLCJpbmRleCIsInNsaWRlcyIsImZpbmRBbGwiLCJtYXAiLCJub2RlIiwiaSIsImNsYXNzTGlzdCIsInJlbW92ZSIsImFkZCIsInN3YXBTbGlkZXMiLCJhZGRFdmVudExpc3RlbmVyIiwic2V0VGltZW91dCIsIndpbmRvd18xIiwid2luZG93IiwiZ2xvYmFsIiwic2VsZiIsInJlcXVlc3QiLCJyZXF1ZXN0QW5pbWF0aW9uRnJhbWUiLCJ3ZWJraXRSZXF1ZXN0QW5pbWF0aW9uRnJhbWUiLCJtb3pSZXF1ZXN0QW5pbWF0aW9uRnJhbWUiLCJmbiIsImN1cnIiLCJtcyIsIm1heCIsInByZXYiLCJyZXEiLCJjYW5jZWwiLCJjYW5jZWxBbmltYXRpb25GcmFtZSIsIndlYmtpdENhbmNlbEFuaW1hdGlvbkZyYW1lIiwibW96Q2FuY2VsQW5pbWF0aW9uRnJhbWUiLCJjbGVhclRpbWVvdXQiLCJGdW5jdGlvbiIsInByb3RvdHlwZSIsImJpbmQiLCJtb2R1bGUiLCJzY3JvbGxfMSIsInJlc29sdmVUYXJnZXQiLCJpZCIsImdldEJvdW5kaW5nQ2xpZW50UmVjdCIsInRvcCIsImNsaWVudEhlaWdodCIsInNjcm9sbEhhbmRsZXIiLCJlIiwicHJldmVudERlZmF1bHQiLCJnZXRBdHRyaWJ1dGUiLCJmb3JFYWNoIiwiaGVhZGVyIiwiYnVmZmVyIiwiZG9ja2VkIiwidXBkYXRlIiwidG9nZ2xlIiwicmVxdWVzdFVwZGF0ZSIsIl9yZWYiLCJmcm9udCIsIl9yZWYyIiwiYmFjayIsInBvc2l0aW9uIiwiZmxpcE5vZGUiLCJnZXRGbGlwSGFuZGxlciIsInVuZmxpcE5vZGUiLCJnZXRVbmZsaXBIYW5kbGVyIiwibWFwTm9kZSIsImdldEVsZW1lbnRCeUlkIiwiY29uZmlnIiwiSlNPTiIsInBhcnNlIiwia2V5IiwiX0pTT04kcGFyc2UiLCJtYXJrZXIiLCJpbml0IiwiZ29vZ2xlIiwibWFwcyIsIk1hcCIsIk1hcmtlciIsImluaXRNYXAiLCJhcHBlbmRDaGlsZCIsInRhZyIsInNldEF0dHJpYnV0ZSIsImdldFNjcmlwdFRhZyIsImNvbnNvbGUiLCJsb2ciLCJkYXRlIiwiZ2V0RnVsbFllYXIiLCJsb2NhdGlvbiIsImhvc3QiLCJyZXBsYWNlIiwiZm9ybSIsImZvcm1EYXRhIiwiRm9ybURhdGEiLCJrZXlzIiwiZmllbGQiLCJhcHBlbmQiLCJkYXRhc2V0IiwidmFsdWUiLCJmaWxlSW5wdXQiLCJmaWxlcyJdLCJtYXBwaW5ncyI6InlCQUVBLFNBQVNBLEVBQVFDLEVBQU1DLEVBQVNDLEVBQUlDLEVBQVNDLFlBNkJsQ0MsRUFBU0MsTUFDWkMsU0FDS0gsRUFDTCxJQUFJSSxNQUFNLG9CQUNWUCxFQUFRRCxRQUlSUyxHQUFPLElBQUlDLEtBQ1hDLEVBQU9DLEtBQUtDLElBQUksR0FBS0osRUFBTUssR0FBU0MsR0FDcENDLEVBQVFDLEVBQUtOLEtBRVRYLEdBQVNnQixHQUFTZCxFQUFLZ0IsR0FBU0EsRUFFN0JDLElBQUosRUFBUWQsRUFBZSxhQUNuQixLQUFNSixFQUFRRCxVQTNDdkJjLEdBQVMsSUFBSUosS0FDYlEsRUFBT2pCLEVBQVFELEdBQ2ZPLEdBQVksRUFFWlUsRUFBT0csRUFDUEwsRUFBVyxVQUVRLG1CQUFaWixJQUNFQSxRQUdEQSxPQUNLYyxNQUFRQSxJQUNaZCxFQUFRWSxVQUFZQSxJQUNwQlgsR0FBWSxjQUdyQmMsSUFBU2hCLEVBQ0pFLEVBQ0wsSUFBSUksTUFBTSw2Q0FDVlAsRUFBUUQsT0EyQlJLLGlCQXRCVSxJQTJCaEIsU0FBU2UsRUFBV0MsU0FDWCxJQUFNLEVBQUlULEtBQUtVLElBQUlWLEtBQUtXLEdBQUtGLElDeER0QyxJQUFBRyxFQUFB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ekksS0FFakI2QyxFQUFJYSxRQUFRLG1CQUNUMkMsUUFBUSxTQUFBekMsS0FDRnpCLFdBQWFzRyxFQUFLQyxnQkNKM0IsSUFBTXBDLEVBQVN6RCxFQUFJVSxLQUFLLGlCQUV4QlYsRUFBSVUsS0FBSyxnQkFBaUIrQyxHQUN2QnBDLGlCQUFpQixRQUFTLGFBQ2xCSixVQUFVNEMsT0FBTyx5QkFDZnRFLEtBQUswQixVQUFVNEMsT0FBTyxjQUduQzdELEVBQUlhLFFBQVEsb0JBQ1QyQyxRQUFRLFNBQUF6QyxLQUNGTSxpQkFBaUIsUUFBUyxhQUN0QkosVUFBVUMsT0FBTyx5QkFDZjNCLEtBQUswQixVQUFVQyxPQUFPLGdCQ1pyQyxJQUFNd0QsVUFDSWxELE9BQU9zRSxTQUFTQyxLQUFLQyxRQUFRLE1BQU8sWUFDbkMsNEJBQ0UsY0FHUEMsRUFBT2pHLEVBQUlVLEtBQUssdUJBRWxCdUYsS0FDRzVFLGlCQUFpQixTQUFVLFNBQUNnQyxLQUM3QkMsaUJBRVcsSUFBSWxGLGVBQ040QixFQUFJVSxLQUFLLG9CQUFxQnVGLE9BQ3JDQyxFQUFXLElBQUlDLGdCQUVaQyxLQUFLMUIsR0FDVGxCLFFBQVEsU0FBQTZDLFVBQVNILEVBQVNJLE9BQU9ELEVBQU8zQixFQUFPMkIsUUFFOUN4RixRQUFRLGVBQWdCb0YsR0FDekJ6QyxRQUFRLFNBQUE2QyxVQUFTSCxFQUFTSSxPQUFPRCxFQUFNRSxRQUFRRixNQUFPQSxFQUFNRyxTQUUzREMsV0FBV1AsRUFBU0ksT0FBTyxhQUFjRyxVQUFVQyxNQUFNLFFBRXpEcEksS0FBSyxPQUFRLDBCQUEwQixPQUV2QytDLGlCQUFpQixPQUFRLG1CQUNuQnNFLElBQUloQixLQUFLQyxNQUFNbkcsS0FBS0UsaUJBRzFCRSxLQUFLcUgiLCJmaWxlIjoic2l0ZS5qcyIsInNvdXJjZXNDb250ZW50IjpbInZhciByYWYgPSByZXF1aXJlKCdyYWZsJylcblxuZnVuY3Rpb24gc2Nyb2xsIChwcm9wLCBlbGVtZW50LCB0bywgb3B0aW9ucywgY2FsbGJhY2spIHtcbiAgdmFyIHN0YXJ0ID0gK25ldyBEYXRlXG4gIHZhciBmcm9tID0gZWxlbWVudFtwcm9wXVxuICB2YXIgY2FuY2VsbGVkID0gZmFsc2VcblxuICB2YXIgZWFzZSA9IGluT3V0U2luZVxuICB2YXIgZHVyYXRpb24gPSAzNTBcblxuICBpZiAodHlwZW9mIG9wdGlvbnMgPT09ICdmdW5jdGlvbicpIHtcbiAgICBjYWxsYmFjayA9IG9wdGlvbnNcbiAgfVxuICBlbHNlIHtcbiAgICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fVxuICAgIGVhc2UgPSBvcHRpb25zLmVhc2UgfHwgZWFzZVxuICAgIGR1cmF0aW9uID0gb3B0aW9ucy5kdXJhdGlvbiB8fCBkdXJhdGlvblxuICAgIGNhbGxiYWNrID0gY2FsbGJhY2sgfHwgZnVuY3Rpb24gKCkge31cbiAgfVxuXG4gIGlmIChmcm9tID09PSB0bykge1xuICAgIHJldHVybiBjYWxsYmFjayhcbiAgICAgIG5ldyBFcnJvcignRWxlbWVudCBhbHJlYWR5IGF0IHRhcmdldCBzY3JvbGwgcG9zaXRpb24nKSxcbiAgICAgIGVsZW1lbnRbcHJvcF1cbiAgICApXG4gIH1cblxuICBmdW5jdGlvbiBjYW5jZWwgKCkge1xuICAgIGNhbmNlbGxlZCA9IHRydWVcbiAgfVxuXG4gIGZ1bmN0aW9uIGFuaW1hdGUgKHRpbWVzdGFtcCkge1xuICAgIGlmIChjYW5jZWxsZWQpIHtcbiAgICAgIHJldHVybiBjYWxsYmFjayhcbiAgICAgICAgbmV3IEVycm9yKCdTY3JvbGwgY2FuY2VsbGVkJyksXG4gICAgICAgIGVsZW1lbnRbcHJvcF1cbiAgICAgIClcbiAgICB9XG5cbiAgICB2YXIgbm93ID0gK25ldyBEYXRlXG4gICAgdmFyIHRpbWUgPSBNYXRoLm1pbigxLCAoKG5vdyAtIHN0YXJ0KSAvIGR1cmF0aW9uKSlcbiAgICB2YXIgZWFzZWQgPSBlYXNlKHRpbWUpXG5cbiAgICBlbGVtZW50W3Byb3BdID0gKGVhc2VkICogKHRvIC0gZnJvbSkpICsgZnJvbVxuXG4gICAgdGltZSA8IDEgPyByYWYoYW5pbWF0ZSkgOiByYWYoZnVuY3Rpb24gKCkge1xuICAgICAgY2FsbGJhY2sobnVsbCwgZWxlbWVudFtwcm9wXSlcbiAgICB9KVxuICB9XG5cbiAgcmFmKGFuaW1hdGUpXG5cbiAgcmV0dXJuIGNhbmNlbFxufVxuXG5mdW5jdGlvbiBpbk91dFNpbmUgKG4pIHtcbiAgcmV0dXJuIC41ICogKDEgLSBNYXRoLmNvcyhNYXRoLlBJICogbikpXG59XG5cbm1vZHVsZS5leHBvcnRzID0ge1xuICB0b3A6IGZ1bmN0aW9uIChlbGVtZW50LCB0bywgb3B0aW9ucywgY2FsbGJhY2spIHtcbiAgICByZXR1cm4gc2Nyb2xsKCdzY3JvbGxUb3AnLCBlbGVtZW50LCB0bywgb3B0aW9ucywgY2FsbGJhY2spXG4gIH0sXG4gIGxlZnQ6IGZ1bmN0aW9uIChlbGVtZW50LCB0bywgb3B0aW9ucywgY2FsbGJhY2spIHtcbiAgICByZXR1cm4gc2Nyb2xsKCdzY3JvbGxMZWZ0JywgZWxlbWVudCwgdG8sIG9wdGlvbnMsIGNhbGxiYWNrKVxuICB9XG59XG4iLCJleHBvcnQgZGVmYXVsdCAodXJpKSA9PiB7XG4gIGNvbnN0IHhociA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpXG4gIGxldCBlcnJvckhhbmRsZXIgPSAoKSA9PiB7fVxuXG4gIHhoci5vcGVuKCdHRVQnLCB1cmksIHRydWUpXG5cbiAgcmV0dXJuIHtcbiAgICB0aGVuOiAoY2IpID0+IHtcbiAgICAgIHhoci5vbmxvYWQgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgbGV0IHZhbGlkUmVzcG9uc2UgPSB0aGlzLnN0YXR1cyA8IDIwMCB8fCB0aGlzLnN0YXR1cyA+PSA0MDBcbiAgICAgICAgaWYgKHZhbGlkUmVzcG9uc2UgJiYgZXJyb3JIYW5kbGVyKSBlcnJvckhhbmRsZXIodGhpcylcbiAgICAgICAgY2IodGhpcy5yZXNwb25zZSlcbiAgICAgIH1cblxuICAgICAgeGhyLm9uZXJyb3IgPSBlcnJvckhhbmRsZXJcbiAgICAgIHhoci5zZW5kKClcblxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgY2F0Y2g6IChoYW5kbGVyKSA9PiB7IGVycm9ySGFuZGxlciA9IGhhbmRsZXIgfVxuICAgICAgfVxuICAgIH1cbiAgfVxufVxuIiwiaW1wb3J0IGZldGNoIGZyb20gJy4vZmV0Y2gnXG5cbmZldGNoKCcvYXNzZXRzL2ljb25zL3Nwcml0ZS5zdmcnKVxuICAudGhlbihzcHJpdGUgPT4ge1xuICAgIGxldCBmaWd1cmUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdmaWd1cmUnKVxuICAgIGZpZ3VyZS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnXG4gICAgZmlndXJlLmlubmVySFRNTCA9IHNwcml0ZVxuICAgIGRvY3VtZW50LmJvZHkuaW5zZXJ0QmVmb3JlKGZpZ3VyZSwgZG9jdW1lbnQuYm9keS5jaGlsZHJlblswXSlcbiAgfSlcbiAgLmNhdGNoKGVyciA9PiB7XG4gICAgY29uc29sZS53YXJuKCdJY29uIHNwcml0ZXNoZWV0IGNvdWxkIG5vdCBiZSBsb2FkZWRcXG4nLCBlcnIpXG4gIH0pXG4iLCJjb25zdCBzY3JvbGxCb3ggPSBkb2N1bWVudC5zY3JvbGxpbmdFbGVtZW50IHx8IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudFxuXG5leHBvcnQgZGVmYXVsdCB7XG4gIHNjcm9sbEJveCxcblxuICBmaW5kOiAocXVlcnksIHNjb3BlID0gZG9jdW1lbnQpID0+XG4gICAgc2NvcGUucXVlcnlTZWxlY3RvcihxdWVyeSksXG5cbiAgZmluZEFsbDogKHF1ZXJ5LCBzY29wZSA9IGRvY3VtZW50KSA9PlxuICAgIFsuLi5zY29wZS5xdWVyeVNlbGVjdG9yQWxsKHF1ZXJ5KV0sXG5cbiAgZ2V0IHNjcm9sbFRvcCgpIHtcbiAgICByZXR1cm4gc2Nyb2xsQm94LnNjcm9sbFRvcFxuICB9XG59XG4iLCJpbXBvcnQgZG9tIGZyb20gJy4vZG9tLWhlbHBlcnMnXG5cbmNvbnN0IHRpbWVyID0gZG9tLmZpbmQoJ1tkYXRhLXRpbWVyXScpXG5sZXQgaW5kZXggPSAwXG5cbmNvbnN0IHNsaWRlcyA9IGRvbS5maW5kQWxsKCdbZGF0YS1zbGlkZV0nKVxuICAubWFwKChub2RlLCBpKSA9PiB7XG4gICAgaWYgKCFpKSBub2RlLmNsYXNzTGlzdC5hZGQoJ2FjdGl2ZS1zbGlkZScpXG4gICAgZWxzZSBub2RlLmNsYXNzTGlzdC5yZW1vdmUoJ2FjdGl2ZS1zbGlkZScpXG4gICAgcmV0dXJuIG5vZGVcbiAgfSlcblxuY29uc3Qgc3dhcFNsaWRlcyA9ICgpID0+IHtcbiAgc2xpZGVzW2luZGV4XS5jbGFzc0xpc3QucmVtb3ZlKCdhY3RpdmUtc2xpZGUnKVxuICBpbmRleCA9IChpbmRleCArIDEgPT09IHNsaWRlcy5sZW5ndGgpID8gMCA6IGluZGV4ICsgMVxuICBzbGlkZXNbaW5kZXhdLmNsYXNzTGlzdC5hZGQoJ2FjdGl2ZS1zbGlkZScpXG4gIHRpbWVyLmNsYXNzTGlzdC5hZGQoJ3J1bm5pbmcnKVxufVxuXG50aW1lci5hZGRFdmVudExpc3RlbmVyKCd0cmFuc2l0aW9uZW5kJywgKCkgPT4ge1xuICB0aW1lci5jbGFzc0xpc3QucmVtb3ZlKCdydW5uaW5nJylcbiAgc2V0VGltZW91dChzd2FwU2xpZGVzLCAxMjUpXG59KVxuXG5zZXRUaW1lb3V0KCgpID0+IHtcbiAgdGltZXIuY2xhc3NMaXN0LmFkZCgncnVubmluZycpXG59LCAyNTApXG4iLCJ2YXIgd2luO1xuXG5pZiAodHlwZW9mIHdpbmRvdyAhPT0gXCJ1bmRlZmluZWRcIikge1xuICAgIHdpbiA9IHdpbmRvdztcbn0gZWxzZSBpZiAodHlwZW9mIGdsb2JhbCAhPT0gXCJ1bmRlZmluZWRcIikge1xuICAgIHdpbiA9IGdsb2JhbDtcbn0gZWxzZSBpZiAodHlwZW9mIHNlbGYgIT09IFwidW5kZWZpbmVkXCIpe1xuICAgIHdpbiA9IHNlbGY7XG59IGVsc2Uge1xuICAgIHdpbiA9IHt9O1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IHdpbjtcbiIsInZhciBnbG9iYWwgPSByZXF1aXJlKCdnbG9iYWwnKVxuXG4vKipcbiAqIGByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKWBcbiAqL1xuXG52YXIgcmVxdWVzdCA9IGdsb2JhbC5yZXF1ZXN0QW5pbWF0aW9uRnJhbWVcbiAgfHwgZ2xvYmFsLndlYmtpdFJlcXVlc3RBbmltYXRpb25GcmFtZVxuICB8fCBnbG9iYWwubW96UmVxdWVzdEFuaW1hdGlvbkZyYW1lXG4gIHx8IGZhbGxiYWNrXG5cbnZhciBwcmV2ID0gK25ldyBEYXRlXG5mdW5jdGlvbiBmYWxsYmFjayAoZm4pIHtcbiAgdmFyIGN1cnIgPSArbmV3IERhdGVcbiAgdmFyIG1zID0gTWF0aC5tYXgoMCwgMTYgLSAoY3VyciAtIHByZXYpKVxuICB2YXIgcmVxID0gc2V0VGltZW91dChmbiwgbXMpXG4gIHJldHVybiBwcmV2ID0gY3VyciwgcmVxXG59XG5cbi8qKlxuICogYGNhbmNlbEFuaW1hdGlvbkZyYW1lKClgXG4gKi9cblxudmFyIGNhbmNlbCA9IGdsb2JhbC5jYW5jZWxBbmltYXRpb25GcmFtZVxuICB8fCBnbG9iYWwud2Via2l0Q2FuY2VsQW5pbWF0aW9uRnJhbWVcbiAgfHwgZ2xvYmFsLm1vekNhbmNlbEFuaW1hdGlvbkZyYW1lXG4gIHx8IGNsZWFyVGltZW91dFxuXG5pZiAoRnVuY3Rpb24ucHJvdG90eXBlLmJpbmQpIHtcbiAgcmVxdWVzdCA9IHJlcXVlc3QuYmluZChnbG9iYWwpXG4gIGNhbmNlbCA9IGNhbmNlbC5iaW5kKGdsb2JhbClcbn1cblxuZXhwb3J0cyA9IG1vZHVsZS5leHBvcnRzID0gcmVxdWVzdFxuZXhwb3J0cy5jYW5jZWwgPSBjYW5jZWxcbiIsImltcG9ydCBzY3JvbGwgZnJvbSAnc2Nyb2xsJ1xuaW1wb3J0IGRvbSBmcm9tICcuL2RvbS1oZWxwZXJzJ1xuXG5jb25zdCBuYXZIZWlnaHQgPSAoKSA9PlxuICBkb20uZmluZCgnW2RhdGEtaGVhZGVyXScpLmNsaWVudEhlaWdodFxuXG5jb25zdCByZXNvbHZlVGFyZ2V0ID0gKGlkKSA9PlxuICBkb20uc2Nyb2xsVG9wICsgZG9tLmZpbmQoaWQpLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLnRvcCAtIG5hdkhlaWdodCgpXG5cbmNvbnN0IHNjcm9sbEhhbmRsZXIgPSBmdW5jdGlvbihlKSB7XG4gIGUucHJldmVudERlZmF1bHQoKVxuICBzY3JvbGwudG9wKGRvbS5zY3JvbGxCb3gsIHJlc29sdmVUYXJnZXQodGhpcy5nZXRBdHRyaWJ1dGUoJ2hyZWYnKSksIHsgZHVyYXRpb246IDUwMCB9KVxufVxuXG5kb20uZmluZEFsbCgnW2RhdGEtc2Nyb2xsLXRvXScpXG4gIC5mb3JFYWNoKG5vZGUgPT4ge1xuICAgIG5vZGUuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBzY3JvbGxIYW5kbGVyKVxuICB9KVxuIiwiaW1wb3J0IGRvbSBmcm9tICcuL2RvbS1oZWxwZXJzJ1xuXG5jb25zdCBoZWFkZXIgPSBkb20uZmluZCgnW2RhdGEtaGVhZGVyXScpXG5sZXQgc2Nyb2xsLCBidWZmZXIsIGRvY2tlZFxuXG5jb25zdCB1cGRhdGUgPSAoKSA9PiB7XG4gIGxldCBkb2NrID0gc2Nyb2xsID4gMTAgJiYgIWRvY2tlZFxuICBsZXQgdW5kb2NrID0gc2Nyb2xsIDw9IDEwICYmIGRvY2tlZFxuXG4gIGlmIChkb2NrIHx8IHVuZG9jaykgZG9ja2VkID0gaGVhZGVyLmNsYXNzTGlzdC50b2dnbGUoJ2hlYWRlci0tZG9ja2VkJylcbiAgYnVmZmVyID0gZmFsc2Vcbn1cblxuY29uc3QgcmVxdWVzdFVwZGF0ZSA9ICgpID0+IHtcbiAgaWYgKCFidWZmZXIpIHJlcXVlc3RBbmltYXRpb25GcmFtZSh1cGRhdGUpXG4gIGJ1ZmZlciA9IHRydWVcbiAgc2Nyb2xsID0gZG9tLnNjcm9sbFRvcFxufVxuXG5yZXF1ZXN0VXBkYXRlKClcbndpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdzY3JvbGwnLCByZXF1ZXN0VXBkYXRlKVxuIiwiaW1wb3J0IGRvbSBmcm9tICcuL2RvbS1oZWxwZXJzJ1xuXG5jb25zdCBnZXRGbGlwSGFuZGxlciA9IChub2RlKSA9PlxuICAoKSA9PiBub2RlLmNsYXNzTGlzdC5hZGQoJ2NhcmQtLWZsaXAnKVxuXG5jb25zdCBnZXRVbmZsaXBIYW5kbGVyID0gKG5vZGUpID0+XG4gICgpID0+IG5vZGUuY2xhc3NMaXN0LnJlbW92ZSgnY2FyZC0tZmxpcCcpXG5cbmNvbnN0IGdldFNob3J0ZXN0U2lkZSA9IChbZnJvbnQsIGJhY2tdKSA9PlxuICAoZnJvbnQuY2xpZW50SGVpZ2h0IDwgYmFjay5jbGllbnRIZWlnaHQpID8gZnJvbnQgOiBiYWNrXG5cbmRvbS5maW5kQWxsKCdbZGF0YS1jYXJkXScpXG4gIC5mb3JFYWNoKG5vZGUgPT4ge1xuICAgIGdldFNob3J0ZXN0U2lkZShub2RlLmNoaWxkcmVuKVxuICAgICAgLnN0eWxlLnBvc2l0aW9uID0gJ2Fic29sdXRlJ1xuXG4gICAgZG9tLmZpbmRBbGwoJ1tkYXRhLWNhcmQtZmxpcF0nLCBub2RlKVxuICAgICAgLmZvckVhY2goZmxpcE5vZGUgPT4ge1xuICAgICAgICBmbGlwTm9kZS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGdldEZsaXBIYW5kbGVyKG5vZGUpKVxuICAgICAgfSlcblxuICAgIGRvbS5maW5kQWxsKCdbZGF0YS1jYXJkLXVuZmxpcF0nLCBub2RlKVxuICAgICAgLmZvckVhY2godW5mbGlwTm9kZSA9PiB7XG4gICAgICAgIHVuZmxpcE5vZGUuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBnZXRVbmZsaXBIYW5kbGVyKG5vZGUpKVxuICAgICAgfSlcbiAgfSlcbiIsImltcG9ydCBmZXRjaCBmcm9tICcuL2ZldGNoJ1xuXG5jb25zdCBtYXBOb2RlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ21hcCcpXG5cbmNvbnN0IGdldFNjcmlwdFRhZyA9IChrZXkpID0+IHtcbiAgbGV0IHRhZyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NjcmlwdCcpXG4gIHRhZy5zZXRBdHRyaWJ1dGUoJ2FzeW5jJywgJycpXG4gIHRhZy5zZXRBdHRyaWJ1dGUoJ2RlZmVyJywgJycpXG4gIHRhZy5zZXRBdHRyaWJ1dGUoJ3NyYycsIGBodHRwczovL21hcHMuZ29vZ2xlYXBpcy5jb20vbWFwcy9hcGkvanM/a2V5PSR7a2V5fSZjYWxsYmFjaz1pbml0TWFwYClcbiAgcmV0dXJuIHRhZ1xufVxuXG5pZiAobWFwTm9kZSkge1xuICBmZXRjaCgnL2Fzc2V0cy9kYXRhL21hcC1jb25maWcuanNvbicpXG4gICAgLnRoZW4oY29uZmlnID0+IHtcbiAgICAgIGxldCB7IGtleSwgb3B0aW9ucywgbWFya2VyOiBwb3NpdGlvbiB9ID0gSlNPTi5wYXJzZShjb25maWcpXG5cbiAgICAgIGNvbnN0IGluaXQgPSB7XG4gICAgICAgIG1hcDogKCkgPT4gbmV3IGdvb2dsZS5tYXBzLk1hcChtYXBOb2RlLCBvcHRpb25zKSxcbiAgICAgICAgbWFya2VyOiAobWFwKSA9PiBuZXcgZ29vZ2xlLm1hcHMuTWFya2VyKHtcbiAgICAgICAgICBwb3NpdGlvbixcbiAgICAgICAgICBtYXAsXG4gICAgICAgICAgaWNvbjogJy9hc3NldHMvbWVkaWEvbG9nby9sbGItbWFwLnBuZydcbiAgICAgICAgfSlcbiAgICAgIH1cblxuICAgICAgd2luZG93LmluaXRNYXAgPSAoKSA9PiB7XG4gICAgICAgIGluaXQubWFya2VyKGluaXQubWFwKCkpXG4gICAgICB9XG5cbiAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoZ2V0U2NyaXB0VGFnKGtleSkpXG4gICAgfSlcbiAgICAuY2F0Y2goZXJyID0+IGNvbnNvbGUubG9nKGVycikpXG59XG4iLCJpbXBvcnQgZG9tIGZyb20gJy4vZG9tLWhlbHBlcnMnXG5cbmNvbnN0IGRhdGUgPSBuZXcgRGF0ZSgpXG5cbmRvbS5maW5kQWxsKCd0aW1lW2RhdGEteWVhcl0nKVxuICAuZm9yRWFjaChub2RlID0+IHtcbiAgICBub2RlLmlubmVySFRNTCArPSBkYXRlLmdldEZ1bGxZZWFyKClcbiAgfSlcbiIsImltcG9ydCBkb20gZnJvbSAnLi9kb20taGVscGVycydcblxuY29uc3QgaGVhZGVyID0gZG9tLmZpbmQoJ1tkYXRhLWhlYWRlcl0nKVxuXG5kb20uZmluZCgnW2RhdGEtYnVyZ2VyXScsIGhlYWRlcilcbiAgLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgIGhlYWRlci5jbGFzc0xpc3QudG9nZ2xlKCdoZWFkZXItLW9wZW4nKVxuICAgIGRvY3VtZW50LmJvZHkuY2xhc3NMaXN0LnRvZ2dsZSgnbm9zY3JvbGwnKVxuICB9KVxuXG5kb20uZmluZEFsbCgnW2RhdGEtc2Nyb2xsLXRvXScpXG4gIC5mb3JFYWNoKG5vZGUgPT4ge1xuICAgIG5vZGUuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICBoZWFkZXIuY2xhc3NMaXN0LnJlbW92ZSgnaGVhZGVyLS1vcGVuJylcbiAgICAgIGRvY3VtZW50LmJvZHkuY2xhc3NMaXN0LnJlbW92ZSgnbm9zY3JvbGwnKVxuICAgIH0pXG4gIH0pXG4iLCJpbXBvcnQgZG9tIGZyb20gJy4vZG9tLWhlbHBlcnMnXG5cbmNvbnN0IGNvbmZpZyA9IHtcbiAgb3JpZ2luOiB3aW5kb3cubG9jYXRpb24uaG9zdC5yZXBsYWNlKC9cXC8vZywgJycpLFxuICBzdWJqZWN0OiAnTm91dmVhdSBjb250YWN0JyxcbiAgcmVjaXBpZW50OiAnZGV2QHVkeS5pbydcbn1cblxuY29uc3QgZm9ybSA9IGRvbS5maW5kKCdbZGF0YS1jb250YWN0LWZvcm1dJylcblxuaWYgKGZvcm0pIHtcbiAgZm9ybS5hZGRFdmVudExpc3RlbmVyKCdzdWJtaXQnLCAoZSkgPT4ge1xuICAgIGUucHJldmVudERlZmF1bHQoKVxuXG4gICAgY29uc3QgaHR0cCA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpXG4gICAgbGV0IGZpbGUgPSBkb20uZmluZCgnW2RhdGEtYXR0YWNobWVudF0nLCBmb3JtKVxuICAgIGxldCBmb3JtRGF0YSA9IG5ldyBGb3JtRGF0YSgpXG5cbiAgICBPYmplY3Qua2V5cyhjb25maWcpXG4gICAgICAuZm9yRWFjaChmaWVsZCA9PiBmb3JtRGF0YS5hcHBlbmQoZmllbGQsIGNvbmZpZ1tmaWVsZF0pKVxuXG4gICAgZG9tLmZpbmRBbGwoJ1tkYXRhLWZpZWxkXScsIGZvcm0pXG4gICAgICAuZm9yRWFjaChmaWVsZCA9PiBmb3JtRGF0YS5hcHBlbmQoZmllbGQuZGF0YXNldC5maWVsZCwgZmllbGQudmFsdWUpKVxuXG4gICAgaWYgKGZpbGVJbnB1dCkgZm9ybURhdGEuYXBwZW5kKCdhdHRhY2htZW50JywgZmlsZUlucHV0LmZpbGVzWzBdKVxuXG4gICAgeGhyLm9wZW4oJ1BPU1QnLCAnL2luYy9tYWlsdG8vbWFpbHRvLnBocCcsIHRydWUpXG5cbiAgICB4aHIuYWRkRXZlbnRMaXN0ZW5lcignbG9hZCcsIGZ1bmN0aW9uKCkge1xuICAgICAgY29uc29sZS5sb2coSlNPTi5wYXJzZSh0aGlzLnJlc3BvbnNlKSlcbiAgICB9KVxuXG4gICAgeGhyLnNlbmQoZm9ybURhdGEpXG4gIH0pXG59XG4iXX0=
