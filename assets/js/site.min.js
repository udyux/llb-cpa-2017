!function(){"use strict";function e(e,n,a,i,r){function o(t){if(l)return r(new Error("Scroll cancelled"),n[e]);var i=+new Date,m=Math.min(1,(i-c)/u),p=d(m);n[e]=p*(a-s)+s,f(m<1?o:function(){r(null,n[e])})}var c=+new Date,s=n[e],l=!1,d=t,u=350;return"function"==typeof i?r=i:(d=(i=i||{}).ease||d,u=i.duration||u,r=r||function(){}),s===a?r(new Error("Element already at target scroll position"),n[e]):(f(o),function(){l=!0})}function t(e){return.5*(1-Math.cos(Math.PI*e))}var n=function(e){var t=new XMLHttpRequest,n=function(){};return t.open("GET",e,!0),{then:function(e){return t.onload=function(){(this.status<200||this.status>=400)&&n&&n(this),e(this.response)},t.onerror=n,t.send(),{catch:function(e){n=e}}}}};n("/assets/icons/sprite.svg").then(function(e){var t=document.createElement("figure");t.style.display="none",t.innerHTML=e,document.body.insertBefore(t,document.body.children[0])}).catch(function(e){console.warn("Icon spritesheet could not be loaded\n",e)});var a=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],a=!0,i=!1,r=void 0;try{for(var o,c=e[Symbol.iterator]();!(a=(o=c.next()).done)&&(n.push(o.value),!t||n.length!==t);a=!0);}catch(e){i=!0,r=e}finally{try{!a&&c.return&&c.return()}finally{if(i)throw r}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),i=document.scrollingElement||document.documentElement,r={scrollBox:i,find:function(e){return(arguments.length>1&&void 0!==arguments[1]?arguments[1]:document).querySelector(e)},findAll:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:document;return[].concat(function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(t.querySelectorAll(e)))},get scrollTop(){return i.scrollTop}},o=r.find("[data-timer]"),c=0,s=r.findAll("[data-slide]").map(function(e,t){return t?e.classList.remove("active-slide"):e.classList.add("active-slide"),e}),l=function(){s[c].classList.remove("active-slide"),c=c+1===s.length?0:c+1,s[c].classList.add("active-slide"),o.classList.add("running")};o.addEventListener("transitionend",function(){o.classList.remove("running"),setTimeout(l,125)}),setTimeout(function(){o.classList.add("running")},250);var d="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},u="undefined"!=typeof window?window:void 0!==d?d:"undefined"!=typeof self?self:{},f=function(e,t){return t={exports:{}},e(t,t.exports),t.exports}(function(e,t){var n=u.requestAnimationFrame||u.webkitRequestAnimationFrame||u.mozRequestAnimationFrame||function(e){var t=+new Date,n=Math.max(0,16-(t-a)),i=setTimeout(e,n);return a=t,i},a=+new Date,i=u.cancelAnimationFrame||u.webkitCancelAnimationFrame||u.mozCancelAnimationFrame||clearTimeout;Function.prototype.bind&&(n=n.bind(u),i=i.bind(u)),(e.exports=n).cancel=i}),m=function(t,n,a,i){return e("scrollTop",t,n,a,i)},p=function(e){return r.scrollTop+r.find(e).getBoundingClientRect().top-r.find("[data-header]").clientHeight},v=function(e){e.preventDefault(),m(r.scrollBox,p(this.getAttribute("href")),{duration:500})};r.findAll("[data-scroll-to]").forEach(function(e){e.addEventListener("click",v)});var h=r.find("[data-header]"),g=void 0,y=void 0,b=void 0,w=function(){(g>10&&!b||g<=10&&b)&&(b=h.classList.toggle("header--docked")),y=!1},E=function(){y||requestAnimationFrame(w),y=!0,g=r.scrollTop};E(),window.addEventListener("scroll",E);r.findAll("[data-card]").forEach(function(e){(function(e){var t=a(e,2),n=t[0],i=t[1];return n.clientHeight<i.clientHeight?n:i})(e.children).style.position="absolute",r.findAll("[data-card-flip]",e).forEach(function(t){t.addEventListener("click",function(e){return function(){return e.classList.add("card--flip")}}(e))}),r.findAll("[data-card-unflip]",e).forEach(function(t){t.addEventListener("click",function(e){return function(){return e.classList.remove("card--flip")}}(e))})});var L=document.getElementById("map");L&&n("/assets/data/map-config.json").then(function(e){var t=JSON.parse(e),n=t.key,a=t.options,i=t.marker,r=function(){return new google.maps.Map(L,a)},o=function(e){return new google.maps.Marker({position:i,map:e,icon:"/assets/media/logo/llb-map.png"})};window.initMap=function(){o(r())},document.body.appendChild(function(e){var t=document.createElement("script");return t.setAttribute("async",""),t.setAttribute("defer",""),t.setAttribute("src","https://maps.googleapis.com/maps/api/js?key="+e+"&callback=initMap"),t}(n))}).catch(function(e){return console.log(e)});var A=new Date;r.findAll("time[data-year]").forEach(function(e){e.innerHTML+=A.getFullYear()});var k=r.find("[data-header]");r.find("[data-burger]",k).addEventListener("click",function(){k.classList.toggle("header--open"),document.body.classList.toggle("noscroll")}),r.findAll("[data-scroll-to]").forEach(function(e){e.addEventListener("click",function(){k.classList.remove("header--open"),document.body.classList.remove("noscroll")})}),function(e){e&&(r.findAll("input, textarea",e).forEach(function(e){e.addEventListener("focus",function(){e.dataset.state="ok"})}),e.addEventListener("submit",function(t){t.preventDefault();var n=new XMLHttpRequest,a=new FormData,i=!0,o=!1,c=r.find("[data-attachment]",e),s={name:r.find('[name="name"]',e),surname:r.find('[name="surname"]',e),email:r.find('[name="email"]',e),message:r.find('[name="message"]',e)};Object.values(s).forEach(function(e){e.value&&e.value.length?"email"!==e.name||/.+@.+\..+/.test(e.value)||(e.dataset.state="error",i=!1):(e.dataset.state="error",i=!1)}),!o&&i&&(o=!0,n.open("POST","http://udy.io/api/mail/",!0),e.dataset.state="sending",a.append("sitename","llb-cpa"),a.append("email",s.email.value),a.append("mailto","reception@llbcpa.ca"),a.append("message",s.message.value),a.append("subject","Nouveau contact"),a.append("name",s.name.value+" "+s.surname.value),c&&a.append("attachment",c.files[0]),n.addEventListener("load",function(){this.status>=200&&this.status<400?e.dataset.state="success":e.dataset.state="error"}),n.send(a))}))}(r.find("[data-contact-form]"))}();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9zY3JvbGwvaW5kZXguanMiLCJzY3JpcHRzL21vZHVsZXMvZmV0Y2guanMiLCJzY3JpcHRzL21vZHVsZXMvaWNvbi1zcHJpdGUuanMiLCJzY3JpcHRzL21vZHVsZXMvZG9tLWhlbHBlcnMuanMiLCJzY3JpcHRzL21vZHVsZXMvc2xpZGVyLmpzIiwibm9kZV9tb2R1bGVzL2dsb2JhbC93aW5kb3cuanMiLCJub2RlX21vZHVsZXMvcmFmbC9pbmRleC5qcyIsInNjcmlwdHMvbW9kdWxlcy9zY3JvbGwtdG8uanMiLCJzY3JpcHRzL21vZHVsZXMvZG9jay1oZWFkZXIuanMiLCJzY3JpcHRzL21vZHVsZXMvY2FyZC1mbGlwLmpzIiwic2NyaXB0cy9tb2R1bGVzL2dvb2dsZS1tYXAuanMiLCJzY3JpcHRzL21vZHVsZXMvZGF0ZXRpbWUtb3V0cHV0LmpzIiwic2NyaXB0cy9tb2R1bGVzL21vYmlsZS1tZW51LmpzIiwic2NyaXB0cy9tb2R1bGVzL2NvbnRhY3QtZm9ybS5qcyJdLCJuYW1lcyI6WyJzY3JvbGwiLCJwcm9wIiwiZWxlbWVudCIsInRvIiwib3B0aW9ucyIsImNhbGxiYWNrIiwiYW5pbWF0ZSIsInRpbWVzdGFtcCIsImNhbmNlbGxlZCIsIkVycm9yIiwibm93IiwiRGF0ZSIsInRpbWUiLCJNYXRoIiwibWluIiwic3RhcnQiLCJkdXJhdGlvbiIsImVhc2VkIiwiZWFzZSIsImZyb20iLCJyYWYiLCJpbk91dFNpbmUiLCJuIiwiY29zIiwiUEkiLCJmZXRjaCIsInVyaSIsInhociIsIlhNTEh0dHBSZXF1ZXN0IiwiZXJyb3JIYW5kbGVyIiwib3BlbiIsImNiIiwib25sb2FkIiwidGhpcyIsInN0YXR1cyIsInJlc3BvbnNlIiwib25lcnJvciIsInNlbmQiLCJoYW5kbGVyIiwidGhlbiIsInNwcml0ZSIsImZpZ3VyZSIsImRvY3VtZW50IiwiY3JlYXRlRWxlbWVudCIsInN0eWxlIiwiZGlzcGxheSIsImlubmVySFRNTCIsImJvZHkiLCJpbnNlcnRCZWZvcmUiLCJjaGlsZHJlbiIsImNhdGNoIiwiZXJyIiwid2FybiIsInNjcm9sbEJveCIsInNjcm9sbGluZ0VsZW1lbnQiLCJkb2N1bWVudEVsZW1lbnQiLCJkb20iLCJxdWVyeSIsImFyZ3VtZW50cyIsImxlbmd0aCIsInVuZGVmaW5lZCIsInF1ZXJ5U2VsZWN0b3IiLCJzY29wZSIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJzY3JvbGxUb3AiLCJ0aW1lciIsImZpbmQiLCJpbmRleCIsInNsaWRlcyIsImZpbmRBbGwiLCJtYXAiLCJub2RlIiwiaSIsImNsYXNzTGlzdCIsInJlbW92ZSIsImFkZCIsInN3YXBTbGlkZXMiLCJhZGRFdmVudExpc3RlbmVyIiwic2V0VGltZW91dCIsIndpbmRvd18xIiwid2luZG93IiwiZ2xvYmFsIiwic2VsZiIsInJlcXVlc3QiLCJyZXF1ZXN0QW5pbWF0aW9uRnJhbWUiLCJ3ZWJraXRSZXF1ZXN0QW5pbWF0aW9uRnJhbWUiLCJtb3pSZXF1ZXN0QW5pbWF0aW9uRnJhbWUiLCJmbiIsImN1cnIiLCJtcyIsIm1heCIsInByZXYiLCJyZXEiLCJjYW5jZWwiLCJjYW5jZWxBbmltYXRpb25GcmFtZSIsIndlYmtpdENhbmNlbEFuaW1hdGlvbkZyYW1lIiwibW96Q2FuY2VsQW5pbWF0aW9uRnJhbWUiLCJjbGVhclRpbWVvdXQiLCJGdW5jdGlvbiIsInByb3RvdHlwZSIsImJpbmQiLCJtb2R1bGUiLCJzY3JvbGxfMSIsInJlc29sdmVUYXJnZXQiLCJpZCIsImdldEJvdW5kaW5nQ2xpZW50UmVjdCIsInRvcCIsImNsaWVudEhlaWdodCIsInNjcm9sbEhhbmRsZXIiLCJlIiwicHJldmVudERlZmF1bHQiLCJnZXRBdHRyaWJ1dGUiLCJmb3JFYWNoIiwiaGVhZGVyIiwiYnVmZmVyIiwiZG9ja2VkIiwidXBkYXRlIiwidG9nZ2xlIiwicmVxdWVzdFVwZGF0ZSIsIl9yZWYiLCJmcm9udCIsIl9yZWYyIiwiYmFjayIsInBvc2l0aW9uIiwiZmxpcE5vZGUiLCJnZXRGbGlwSGFuZGxlciIsInVuZmxpcE5vZGUiLCJnZXRVbmZsaXBIYW5kbGVyIiwibWFwTm9kZSIsImdldEVsZW1lbnRCeUlkIiwiY29uZmlnIiwiSlNPTiIsInBhcnNlIiwia2V5IiwiX0pTT04kcGFyc2UiLCJtYXJrZXIiLCJpbml0IiwiZ29vZ2xlIiwibWFwcyIsIk1hcCIsIk1hcmtlciIsImluaXRNYXAiLCJhcHBlbmRDaGlsZCIsInRhZyIsInNldEF0dHJpYnV0ZSIsImdldFNjcmlwdFRhZyIsImNvbnNvbGUiLCJsb2ciLCJkYXRlIiwiZ2V0RnVsbFllYXIiLCJmb3JtIiwiaW5wdXQiLCJkYXRhc2V0Iiwic3RhdGUiLCJodHRwIiwiZm9ybURhdGEiLCJGb3JtRGF0YSIsInZhbGlkIiwic3VibWl0dGVkIiwiZmlsZUlucHV0IiwiZmllbGRzIiwidmFsdWVzIiwiZmllbGQiLCJ2YWx1ZSIsIm5hbWUiLCJ0ZXN0IiwiYXBwZW5kIiwiZW1haWwiLCJtZXNzYWdlIiwic3VybmFtZSIsImZpbGVzIl0sIm1hcHBpbmdzIjoieUJBRUEsU0FBU0EsRUFBUUMsRUFBTUMsRUFBU0MsRUFBSUMsRUFBU0MsWUE2QmxDQyxFQUFTQyxNQUNaQyxTQUNLSCxFQUNMLElBQUlJLE1BQU0sb0JBQ1ZQLEVBQVFELFFBSVJTLEdBQU8sSUFBSUMsS0FDWEMsRUFBT0MsS0FBS0MsSUFBSSxHQUFLSixFQUFNSyxHQUFTQyxHQUNwQ0MsRUFBUUMsRUFBS04sS0FFVFgsR0FBU2dCLEdBQVNkLEVBQUtnQixHQUFTQSxFQUU3QkMsSUFBSixFQUFRZCxFQUFlLGFBQ25CLEtBQU1KLEVBQVFELFVBM0N2QmMsR0FBUyxJQUFJSixLQUNiUSxFQUFPakIsRUFBUUQsR0FDZk8sR0FBWSxFQUVaVSxFQUFPRyxFQUNQTCxFQUFXLFVBRVEsbUJBQVpaLElBQ0VBLFFBR0RBLE9BQ0tjLE1BQVFBLElBQ1pkLEVBQVFZLFVBQVlBLElBQ3BCWCxHQUFZLGNBR3JCYyxJQUFTaEIsRUFDSkUsRUFDTCxJQUFJSSxNQUFNLDZDQUNWUCxFQUFRRCxPQTJCUkssaUJBdEJVLElBMkJoQixT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UUFBUUMsTUFBUSxZQUNaYSxPQUFPLFdBQVksYUFDbkJBLE9BQU8sUUFBU04sRUFBT08sTUFBTUosU0FDN0JHLE9BQU8sU0FBVSx5QkFDakJBLE9BQU8sVUFBV04sRUFBT1EsUUFBUUwsU0FDakNHLE9BQU8sVUFBVyxxQkFDbEJBLE9BQU8sT0FBV04sRUFBT0ksS0FBS0QsTUFBdkMsSUFBZ0RILEVBQU9TLFFBQVFOLE9BRTNESixHQUFXSixFQUFTVyxPQUFPLGFBQWNQLEVBQVVXLE1BQU0sTUFFeEQ3RixpQkFBaUIsT0FBUSxXQUN4QjVDLEtBQUtDLFFBQVUsS0FBT0QsS0FBS0MsT0FBUyxNQUNqQ3NILFFBQVFDLE1BQVEsWUFFaEJELFFBQVFDLE1BQVEsWUFJcEJwSCxLQUFLc0gsT0E3RFIsQ0ErREhuRyxFQUFJVSxLQUFLIiwiZmlsZSI6InNpdGUuanMiLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgcmFmID0gcmVxdWlyZSgncmFmbCcpXG5cbmZ1bmN0aW9uIHNjcm9sbCAocHJvcCwgZWxlbWVudCwgdG8sIG9wdGlvbnMsIGNhbGxiYWNrKSB7XG4gIHZhciBzdGFydCA9ICtuZXcgRGF0ZVxuICB2YXIgZnJvbSA9IGVsZW1lbnRbcHJvcF1cbiAgdmFyIGNhbmNlbGxlZCA9IGZhbHNlXG5cbiAgdmFyIGVhc2UgPSBpbk91dFNpbmVcbiAgdmFyIGR1cmF0aW9uID0gMzUwXG5cbiAgaWYgKHR5cGVvZiBvcHRpb25zID09PSAnZnVuY3Rpb24nKSB7XG4gICAgY2FsbGJhY2sgPSBvcHRpb25zXG4gIH1cbiAgZWxzZSB7XG4gICAgb3B0aW9ucyA9IG9wdGlvbnMgfHwge31cbiAgICBlYXNlID0gb3B0aW9ucy5lYXNlIHx8IGVhc2VcbiAgICBkdXJhdGlvbiA9IG9wdGlvbnMuZHVyYXRpb24gfHwgZHVyYXRpb25cbiAgICBjYWxsYmFjayA9IGNhbGxiYWNrIHx8IGZ1bmN0aW9uICgpIHt9XG4gIH1cblxuICBpZiAoZnJvbSA9PT0gdG8pIHtcbiAgICByZXR1cm4gY2FsbGJhY2soXG4gICAgICBuZXcgRXJyb3IoJ0VsZW1lbnQgYWxyZWFkeSBhdCB0YXJnZXQgc2Nyb2xsIHBvc2l0aW9uJyksXG4gICAgICBlbGVtZW50W3Byb3BdXG4gICAgKVxuICB9XG5cbiAgZnVuY3Rpb24gY2FuY2VsICgpIHtcbiAgICBjYW5jZWxsZWQgPSB0cnVlXG4gIH1cblxuICBmdW5jdGlvbiBhbmltYXRlICh0aW1lc3RhbXApIHtcbiAgICBpZiAoY2FuY2VsbGVkKSB7XG4gICAgICByZXR1cm4gY2FsbGJhY2soXG4gICAgICAgIG5ldyBFcnJvcignU2Nyb2xsIGNhbmNlbGxlZCcpLFxuICAgICAgICBlbGVtZW50W3Byb3BdXG4gICAgICApXG4gICAgfVxuXG4gICAgdmFyIG5vdyA9ICtuZXcgRGF0ZVxuICAgIHZhciB0aW1lID0gTWF0aC5taW4oMSwgKChub3cgLSBzdGFydCkgLyBkdXJhdGlvbikpXG4gICAgdmFyIGVhc2VkID0gZWFzZSh0aW1lKVxuXG4gICAgZWxlbWVudFtwcm9wXSA9IChlYXNlZCAqICh0byAtIGZyb20pKSArIGZyb21cblxuICAgIHRpbWUgPCAxID8gcmFmKGFuaW1hdGUpIDogcmFmKGZ1bmN0aW9uICgpIHtcbiAgICAgIGNhbGxiYWNrKG51bGwsIGVsZW1lbnRbcHJvcF0pXG4gICAgfSlcbiAgfVxuXG4gIHJhZihhbmltYXRlKVxuXG4gIHJldHVybiBjYW5jZWxcbn1cblxuZnVuY3Rpb24gaW5PdXRTaW5lIChuKSB7XG4gIHJldHVybiAuNSAqICgxIC0gTWF0aC5jb3MoTWF0aC5QSSAqIG4pKVxufVxuXG5tb2R1bGUuZXhwb3J0cyA9IHtcbiAgdG9wOiBmdW5jdGlvbiAoZWxlbWVudCwgdG8sIG9wdGlvbnMsIGNhbGxiYWNrKSB7XG4gICAgcmV0dXJuIHNjcm9sbCgnc2Nyb2xsVG9wJywgZWxlbWVudCwgdG8sIG9wdGlvbnMsIGNhbGxiYWNrKVxuICB9LFxuICBsZWZ0OiBmdW5jdGlvbiAoZWxlbWVudCwgdG8sIG9wdGlvbnMsIGNhbGxiYWNrKSB7XG4gICAgcmV0dXJuIHNjcm9sbCgnc2Nyb2xsTGVmdCcsIGVsZW1lbnQsIHRvLCBvcHRpb25zLCBjYWxsYmFjaylcbiAgfVxufVxuIiwiZXhwb3J0IGRlZmF1bHQgKHVyaSkgPT4ge1xuICBjb25zdCB4aHIgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKVxuICBsZXQgZXJyb3JIYW5kbGVyID0gKCkgPT4ge31cblxuICB4aHIub3BlbignR0VUJywgdXJpLCB0cnVlKVxuXG4gIHJldHVybiB7XG4gICAgdGhlbjogKGNiKSA9PiB7XG4gICAgICB4aHIub25sb2FkID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIGxldCB2YWxpZFJlc3BvbnNlID0gdGhpcy5zdGF0dXMgPCAyMDAgfHwgdGhpcy5zdGF0dXMgPj0gNDAwXG4gICAgICAgIGlmICh2YWxpZFJlc3BvbnNlICYmIGVycm9ySGFuZGxlcikgZXJyb3JIYW5kbGVyKHRoaXMpXG4gICAgICAgIGNiKHRoaXMucmVzcG9uc2UpXG4gICAgICB9XG5cbiAgICAgIHhoci5vbmVycm9yID0gZXJyb3JIYW5kbGVyXG4gICAgICB4aHIuc2VuZCgpXG5cbiAgICAgIHJldHVybiB7XG4gICAgICAgIGNhdGNoOiAoaGFuZGxlcikgPT4geyBlcnJvckhhbmRsZXIgPSBoYW5kbGVyIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cbn1cbiIsImltcG9ydCBmZXRjaCBmcm9tICcuL2ZldGNoJ1xuXG5mZXRjaCgnL2Fzc2V0cy9pY29ucy9zcHJpdGUuc3ZnJylcbiAgLnRoZW4oc3ByaXRlID0+IHtcbiAgICBsZXQgZmlndXJlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZmlndXJlJylcbiAgICBmaWd1cmUuc3R5bGUuZGlzcGxheSA9ICdub25lJ1xuICAgIGZpZ3VyZS5pbm5lckhUTUwgPSBzcHJpdGVcbiAgICBkb2N1bWVudC5ib2R5Lmluc2VydEJlZm9yZShmaWd1cmUsIGRvY3VtZW50LmJvZHkuY2hpbGRyZW5bMF0pXG4gIH0pXG4gIC5jYXRjaChlcnIgPT4ge1xuICAgIGNvbnNvbGUud2FybignSWNvbiBzcHJpdGVzaGVldCBjb3VsZCBub3QgYmUgbG9hZGVkXFxuJywgZXJyKVxuICB9KVxuIiwiY29uc3Qgc2Nyb2xsQm94ID0gZG9jdW1lbnQuc2Nyb2xsaW5nRWxlbWVudCB8fCBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnRcblxuZXhwb3J0IGRlZmF1bHQge1xuICBzY3JvbGxCb3gsXG5cbiAgZmluZDogKHF1ZXJ5LCBzY29wZSA9IGRvY3VtZW50KSA9PlxuICAgIHNjb3BlLnF1ZXJ5U2VsZWN0b3IocXVlcnkpLFxuXG4gIGZpbmRBbGw6IChxdWVyeSwgc2NvcGUgPSBkb2N1bWVudCkgPT5cbiAgICBbLi4uc2NvcGUucXVlcnlTZWxlY3RvckFsbChxdWVyeSldLFxuXG4gIGdldCBzY3JvbGxUb3AoKSB7XG4gICAgcmV0dXJuIHNjcm9sbEJveC5zY3JvbGxUb3BcbiAgfVxufVxuIiwiaW1wb3J0IGRvbSBmcm9tICcuL2RvbS1oZWxwZXJzJ1xuXG5jb25zdCB0aW1lciA9IGRvbS5maW5kKCdbZGF0YS10aW1lcl0nKVxubGV0IGluZGV4ID0gMFxuXG5jb25zdCBzbGlkZXMgPSBkb20uZmluZEFsbCgnW2RhdGEtc2xpZGVdJylcbiAgLm1hcCgobm9kZSwgaSkgPT4ge1xuICAgIGlmICghaSkgbm9kZS5jbGFzc0xpc3QuYWRkKCdhY3RpdmUtc2xpZGUnKVxuICAgIGVsc2Ugbm9kZS5jbGFzc0xpc3QucmVtb3ZlKCdhY3RpdmUtc2xpZGUnKVxuICAgIHJldHVybiBub2RlXG4gIH0pXG5cbmNvbnN0IHN3YXBTbGlkZXMgPSAoKSA9PiB7XG4gIHNsaWRlc1tpbmRleF0uY2xhc3NMaXN0LnJlbW92ZSgnYWN0aXZlLXNsaWRlJylcbiAgaW5kZXggPSAoaW5kZXggKyAxID09PSBzbGlkZXMubGVuZ3RoKSA/IDAgOiBpbmRleCArIDFcbiAgc2xpZGVzW2luZGV4XS5jbGFzc0xpc3QuYWRkKCdhY3RpdmUtc2xpZGUnKVxuICB0aW1lci5jbGFzc0xpc3QuYWRkKCdydW5uaW5nJylcbn1cblxudGltZXIuYWRkRXZlbnRMaXN0ZW5lcigndHJhbnNpdGlvbmVuZCcsICgpID0+IHtcbiAgdGltZXIuY2xhc3NMaXN0LnJlbW92ZSgncnVubmluZycpXG4gIHNldFRpbWVvdXQoc3dhcFNsaWRlcywgMTI1KVxufSlcblxuc2V0VGltZW91dCgoKSA9PiB7XG4gIHRpbWVyLmNsYXNzTGlzdC5hZGQoJ3J1bm5pbmcnKVxufSwgMjUwKVxuIiwidmFyIHdpbjtcblxuaWYgKHR5cGVvZiB3aW5kb3cgIT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICB3aW4gPSB3aW5kb3c7XG59IGVsc2UgaWYgKHR5cGVvZiBnbG9iYWwgIT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICB3aW4gPSBnbG9iYWw7XG59IGVsc2UgaWYgKHR5cGVvZiBzZWxmICE9PSBcInVuZGVmaW5lZFwiKXtcbiAgICB3aW4gPSBzZWxmO1xufSBlbHNlIHtcbiAgICB3aW4gPSB7fTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSB3aW47XG4iLCJ2YXIgZ2xvYmFsID0gcmVxdWlyZSgnZ2xvYmFsJylcblxuLyoqXG4gKiBgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKClgXG4gKi9cblxudmFyIHJlcXVlc3QgPSBnbG9iYWwucmVxdWVzdEFuaW1hdGlvbkZyYW1lXG4gIHx8IGdsb2JhbC53ZWJraXRSZXF1ZXN0QW5pbWF0aW9uRnJhbWVcbiAgfHwgZ2xvYmFsLm1velJlcXVlc3RBbmltYXRpb25GcmFtZVxuICB8fCBmYWxsYmFja1xuXG52YXIgcHJldiA9ICtuZXcgRGF0ZVxuZnVuY3Rpb24gZmFsbGJhY2sgKGZuKSB7XG4gIHZhciBjdXJyID0gK25ldyBEYXRlXG4gIHZhciBtcyA9IE1hdGgubWF4KDAsIDE2IC0gKGN1cnIgLSBwcmV2KSlcbiAgdmFyIHJlcSA9IHNldFRpbWVvdXQoZm4sIG1zKVxuICByZXR1cm4gcHJldiA9IGN1cnIsIHJlcVxufVxuXG4vKipcbiAqIGBjYW5jZWxBbmltYXRpb25GcmFtZSgpYFxuICovXG5cbnZhciBjYW5jZWwgPSBnbG9iYWwuY2FuY2VsQW5pbWF0aW9uRnJhbWVcbiAgfHwgZ2xvYmFsLndlYmtpdENhbmNlbEFuaW1hdGlvbkZyYW1lXG4gIHx8IGdsb2JhbC5tb3pDYW5jZWxBbmltYXRpb25GcmFtZVxuICB8fCBjbGVhclRpbWVvdXRcblxuaWYgKEZ1bmN0aW9uLnByb3RvdHlwZS5iaW5kKSB7XG4gIHJlcXVlc3QgPSByZXF1ZXN0LmJpbmQoZ2xvYmFsKVxuICBjYW5jZWwgPSBjYW5jZWwuYmluZChnbG9iYWwpXG59XG5cbmV4cG9ydHMgPSBtb2R1bGUuZXhwb3J0cyA9IHJlcXVlc3RcbmV4cG9ydHMuY2FuY2VsID0gY2FuY2VsXG4iLCJpbXBvcnQgc2Nyb2xsIGZyb20gJ3Njcm9sbCdcbmltcG9ydCBkb20gZnJvbSAnLi9kb20taGVscGVycydcblxuY29uc3QgbmF2SGVpZ2h0ID0gKCkgPT5cbiAgZG9tLmZpbmQoJ1tkYXRhLWhlYWRlcl0nKS5jbGllbnRIZWlnaHRcblxuY29uc3QgcmVzb2x2ZVRhcmdldCA9IChpZCkgPT5cbiAgZG9tLnNjcm9sbFRvcCArIGRvbS5maW5kKGlkKS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS50b3AgLSBuYXZIZWlnaHQoKVxuXG5jb25zdCBzY3JvbGxIYW5kbGVyID0gZnVuY3Rpb24oZSkge1xuICBlLnByZXZlbnREZWZhdWx0KClcbiAgc2Nyb2xsLnRvcChkb20uc2Nyb2xsQm94LCByZXNvbHZlVGFyZ2V0KHRoaXMuZ2V0QXR0cmlidXRlKCdocmVmJykpLCB7IGR1cmF0aW9uOiA1MDAgfSlcbn1cblxuZG9tLmZpbmRBbGwoJ1tkYXRhLXNjcm9sbC10b10nKVxuICAuZm9yRWFjaChub2RlID0+IHtcbiAgICBub2RlLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgc2Nyb2xsSGFuZGxlcilcbiAgfSlcbiIsImltcG9ydCBkb20gZnJvbSAnLi9kb20taGVscGVycydcblxuY29uc3QgaGVhZGVyID0gZG9tLmZpbmQoJ1tkYXRhLWhlYWRlcl0nKVxubGV0IHNjcm9sbCwgYnVmZmVyLCBkb2NrZWRcblxuY29uc3QgdXBkYXRlID0gKCkgPT4ge1xuICBsZXQgZG9jayA9IHNjcm9sbCA+IDEwICYmICFkb2NrZWRcbiAgbGV0IHVuZG9jayA9IHNjcm9sbCA8PSAxMCAmJiBkb2NrZWRcblxuICBpZiAoZG9jayB8fCB1bmRvY2spIGRvY2tlZCA9IGhlYWRlci5jbGFzc0xpc3QudG9nZ2xlKCdoZWFkZXItLWRvY2tlZCcpXG4gIGJ1ZmZlciA9IGZhbHNlXG59XG5cbmNvbnN0IHJlcXVlc3RVcGRhdGUgPSAoKSA9PiB7XG4gIGlmICghYnVmZmVyKSByZXF1ZXN0QW5pbWF0aW9uRnJhbWUodXBkYXRlKVxuICBidWZmZXIgPSB0cnVlXG4gIHNjcm9sbCA9IGRvbS5zY3JvbGxUb3Bcbn1cblxucmVxdWVzdFVwZGF0ZSgpXG53aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignc2Nyb2xsJywgcmVxdWVzdFVwZGF0ZSlcbiIsImltcG9ydCBkb20gZnJvbSAnLi9kb20taGVscGVycydcblxuY29uc3QgZ2V0RmxpcEhhbmRsZXIgPSAobm9kZSkgPT5cbiAgKCkgPT4gbm9kZS5jbGFzc0xpc3QuYWRkKCdjYXJkLS1mbGlwJylcblxuY29uc3QgZ2V0VW5mbGlwSGFuZGxlciA9IChub2RlKSA9PlxuICAoKSA9PiBub2RlLmNsYXNzTGlzdC5yZW1vdmUoJ2NhcmQtLWZsaXAnKVxuXG5jb25zdCBnZXRTaG9ydGVzdFNpZGUgPSAoW2Zyb250LCBiYWNrXSkgPT5cbiAgKGZyb250LmNsaWVudEhlaWdodCA8IGJhY2suY2xpZW50SGVpZ2h0KSA/IGZyb250IDogYmFja1xuXG5kb20uZmluZEFsbCgnW2RhdGEtY2FyZF0nKVxuICAuZm9yRWFjaChub2RlID0+IHtcbiAgICBnZXRTaG9ydGVzdFNpZGUobm9kZS5jaGlsZHJlbilcbiAgICAgIC5zdHlsZS5wb3NpdGlvbiA9ICdhYnNvbHV0ZSdcblxuICAgIGRvbS5maW5kQWxsKCdbZGF0YS1jYXJkLWZsaXBdJywgbm9kZSlcbiAgICAgIC5mb3JFYWNoKGZsaXBOb2RlID0+IHtcbiAgICAgICAgZmxpcE5vZGUuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBnZXRGbGlwSGFuZGxlcihub2RlKSlcbiAgICAgIH0pXG5cbiAgICBkb20uZmluZEFsbCgnW2RhdGEtY2FyZC11bmZsaXBdJywgbm9kZSlcbiAgICAgIC5mb3JFYWNoKHVuZmxpcE5vZGUgPT4ge1xuICAgICAgICB1bmZsaXBOb2RlLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZ2V0VW5mbGlwSGFuZGxlcihub2RlKSlcbiAgICAgIH0pXG4gIH0pXG4iLCJpbXBvcnQgZmV0Y2ggZnJvbSAnLi9mZXRjaCdcblxuY29uc3QgbWFwTm9kZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdtYXAnKVxuXG5jb25zdCBnZXRTY3JpcHRUYWcgPSAoa2V5KSA9PiB7XG4gIGxldCB0YWcgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzY3JpcHQnKVxuICB0YWcuc2V0QXR0cmlidXRlKCdhc3luYycsICcnKVxuICB0YWcuc2V0QXR0cmlidXRlKCdkZWZlcicsICcnKVxuICB0YWcuc2V0QXR0cmlidXRlKCdzcmMnLCBgaHR0cHM6Ly9tYXBzLmdvb2dsZWFwaXMuY29tL21hcHMvYXBpL2pzP2tleT0ke2tleX0mY2FsbGJhY2s9aW5pdE1hcGApXG4gIHJldHVybiB0YWdcbn1cblxuaWYgKG1hcE5vZGUpIHtcbiAgZmV0Y2goJy9hc3NldHMvZGF0YS9tYXAtY29uZmlnLmpzb24nKVxuICAgIC50aGVuKGNvbmZpZyA9PiB7XG4gICAgICBsZXQgeyBrZXksIG9wdGlvbnMsIG1hcmtlcjogcG9zaXRpb24gfSA9IEpTT04ucGFyc2UoY29uZmlnKVxuXG4gICAgICBjb25zdCBpbml0ID0ge1xuICAgICAgICBtYXA6ICgpID0+IG5ldyBnb29nbGUubWFwcy5NYXAobWFwTm9kZSwgb3B0aW9ucyksXG4gICAgICAgIG1hcmtlcjogKG1hcCkgPT4gbmV3IGdvb2dsZS5tYXBzLk1hcmtlcih7XG4gICAgICAgICAgcG9zaXRpb24sXG4gICAgICAgICAgbWFwLFxuICAgICAgICAgIGljb246ICcvYXNzZXRzL21lZGlhL2xvZ28vbGxiLW1hcC5wbmcnXG4gICAgICAgIH0pXG4gICAgICB9XG5cbiAgICAgIHdpbmRvdy5pbml0TWFwID0gKCkgPT4ge1xuICAgICAgICBpbml0Lm1hcmtlcihpbml0Lm1hcCgpKVxuICAgICAgfVxuXG4gICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGdldFNjcmlwdFRhZyhrZXkpKVxuICAgIH0pXG4gICAgLmNhdGNoKGVyciA9PiBjb25zb2xlLmxvZyhlcnIpKVxufVxuIiwiaW1wb3J0IGRvbSBmcm9tICcuL2RvbS1oZWxwZXJzJ1xuXG5jb25zdCBkYXRlID0gbmV3IERhdGUoKVxuXG5kb20uZmluZEFsbCgndGltZVtkYXRhLXllYXJdJylcbiAgLmZvckVhY2gobm9kZSA9PiB7XG4gICAgbm9kZS5pbm5lckhUTUwgKz0gZGF0ZS5nZXRGdWxsWWVhcigpXG4gIH0pXG4iLCJpbXBvcnQgZG9tIGZyb20gJy4vZG9tLWhlbHBlcnMnXG5cbmNvbnN0IGhlYWRlciA9IGRvbS5maW5kKCdbZGF0YS1oZWFkZXJdJylcblxuZG9tLmZpbmQoJ1tkYXRhLWJ1cmdlcl0nLCBoZWFkZXIpXG4gIC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICBoZWFkZXIuY2xhc3NMaXN0LnRvZ2dsZSgnaGVhZGVyLS1vcGVuJylcbiAgICBkb2N1bWVudC5ib2R5LmNsYXNzTGlzdC50b2dnbGUoJ25vc2Nyb2xsJylcbiAgfSlcblxuZG9tLmZpbmRBbGwoJ1tkYXRhLXNjcm9sbC10b10nKVxuICAuZm9yRWFjaChub2RlID0+IHtcbiAgICBub2RlLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgaGVhZGVyLmNsYXNzTGlzdC5yZW1vdmUoJ2hlYWRlci0tb3BlbicpXG4gICAgICBkb2N1bWVudC5ib2R5LmNsYXNzTGlzdC5yZW1vdmUoJ25vc2Nyb2xsJylcbiAgICB9KVxuICB9KVxuIiwiaW1wb3J0IGRvbSBmcm9tICcuL2RvbS1oZWxwZXJzJ1xuXG52b2lkICgoZm9ybSkgPT4ge1xuICBpZiAoIWZvcm0pIHJldHVybjtcblxuICBkb20uZmluZEFsbCgnaW5wdXQsIHRleHRhcmVhJywgZm9ybSlcbiAgICAuZm9yRWFjaChpbnB1dCA9PiB7XG4gICAgICBpbnB1dC5hZGRFdmVudExpc3RlbmVyKCdmb2N1cycsICgpID0+IHtcbiAgICAgICAgaW5wdXQuZGF0YXNldC5zdGF0ZSA9ICdvaydcbiAgICAgIH0pXG4gICAgfSlcblxuICBmb3JtLmFkZEV2ZW50TGlzdGVuZXIoJ3N1Ym1pdCcsIChlKSA9PiB7XG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpXG5cbiAgICBjb25zdCBodHRwID0gbmV3IFhNTEh0dHBSZXF1ZXN0KClcbiAgICBjb25zdCBmb3JtRGF0YSA9IG5ldyBGb3JtRGF0YSgpXG5cbiAgICBsZXQgdmFsaWQgPSB0cnVlXG4gICAgbGV0IHN1Ym1pdHRlZCA9IGZhbHNlXG4gICAgbGV0IGZpbGVJbnB1dCA9IGRvbS5maW5kKCdbZGF0YS1hdHRhY2htZW50XScsIGZvcm0pXG5cbiAgICBsZXQgZmllbGRzID0ge1xuICAgICAgbmFtZTogZG9tLmZpbmQoJ1tuYW1lPVwibmFtZVwiXScsIGZvcm0pLFxuICAgICAgc3VybmFtZTogZG9tLmZpbmQoJ1tuYW1lPVwic3VybmFtZVwiXScsIGZvcm0pLFxuICAgICAgZW1haWw6IGRvbS5maW5kKCdbbmFtZT1cImVtYWlsXCJdJywgZm9ybSksXG4gICAgICBtZXNzYWdlOiBkb20uZmluZCgnW25hbWU9XCJtZXNzYWdlXCJdJywgZm9ybSlcbiAgICB9XG5cbiAgICBPYmplY3QudmFsdWVzKGZpZWxkcylcbiAgICAgIC5mb3JFYWNoKGZpZWxkID0+IHtcbiAgICAgICAgaWYgKCFmaWVsZC52YWx1ZSB8fCAhZmllbGQudmFsdWUubGVuZ3RoKSB7XG4gICAgICAgICAgZmllbGQuZGF0YXNldC5zdGF0ZSA9ICdlcnJvcidcbiAgICAgICAgICB2YWxpZCA9IGZhbHNlXG4gICAgICAgIH0gZWxzZSBpZiAoZmllbGQubmFtZSA9PT0gJ2VtYWlsJyAmJiAhLy4rQC4rXFwuLisvLnRlc3QoZmllbGQudmFsdWUpKSB7XG4gICAgICAgICAgZmllbGQuZGF0YXNldC5zdGF0ZSA9ICdlcnJvcidcbiAgICAgICAgICB2YWxpZCA9IGZhbHNlXG4gICAgICAgIH1cbiAgICAgIH0pXG5cbiAgICBpZiAoc3VibWl0dGVkIHx8ICF2YWxpZCkgcmV0dXJuO1xuICAgIHN1Ym1pdHRlZCA9IHRydWVcblxuICAgIGh0dHAub3BlbignUE9TVCcsICdodHRwOi8vdWR5LmlvL2FwaS9tYWlsLycsIHRydWUpXG5cbiAgICBmb3JtLmRhdGFzZXQuc3RhdGUgPSAnc2VuZGluZydcbiAgICBmb3JtRGF0YS5hcHBlbmQoJ3NpdGVuYW1lJywgJ2xsYi1jcGEnKVxuICAgIGZvcm1EYXRhLmFwcGVuZCgnZW1haWwnLCBmaWVsZHMuZW1haWwudmFsdWUpXG4gICAgZm9ybURhdGEuYXBwZW5kKCdtYWlsdG8nLCAncmVjZXB0aW9uQGxsYmNwYS5jYScpXG4gICAgZm9ybURhdGEuYXBwZW5kKCdtZXNzYWdlJywgZmllbGRzLm1lc3NhZ2UudmFsdWUpXG4gICAgZm9ybURhdGEuYXBwZW5kKCdzdWJqZWN0JywgJ05vdXZlYXUgY29udGFjdCcpXG4gICAgZm9ybURhdGEuYXBwZW5kKCduYW1lJywgYCR7ZmllbGRzLm5hbWUudmFsdWV9ICR7ZmllbGRzLnN1cm5hbWUudmFsdWV9YClcblxuICAgIGlmIChmaWxlSW5wdXQpIGZvcm1EYXRhLmFwcGVuZCgnYXR0YWNobWVudCcsIGZpbGVJbnB1dC5maWxlc1swXSlcblxuICAgIGh0dHAuYWRkRXZlbnRMaXN0ZW5lcignbG9hZCcsIGZ1bmN0aW9uKCkge1xuICAgICAgaWYgKHRoaXMuc3RhdHVzID49IDIwMCAmJiB0aGlzLnN0YXR1cyA8IDQwMCkge1xuICAgICAgICBmb3JtLmRhdGFzZXQuc3RhdGUgPSAnc3VjY2VzcydcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGZvcm0uZGF0YXNldC5zdGF0ZSA9ICdlcnJvcidcbiAgICAgIH1cbiAgICB9KVxuXG4gICAgaHR0cC5zZW5kKGZvcm1EYXRhKVxuICB9KVxufSkoZG9tLmZpbmQoJ1tkYXRhLWNvbnRhY3QtZm9ybV0nKSlcbiJdfQ==
