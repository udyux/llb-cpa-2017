!function(){"use strict";function n(n,t,r,o,i){function a(e){if(s)return i(new Error("Scroll cancelled"),t[n]);var o=+new Date,f=Math.min(1,(o-c)/d),m=u(f);t[n]=m*(r-l)+l,g(f<1?a:function(){i(null,t[n])})}var c=+new Date,l=t[n],s=!1,u=e,d=350;return"function"==typeof o?i=o:(u=(o=o||{}).ease||u,d=o.duration||d,i=i||function(){}),l===r?i(new Error("Element already at target scroll position"),t[n]):(g(a),function(){s=!0})}function e(n){return.5*(1-Math.cos(Math.PI*n))}var t=function(n){var e=new XMLHttpRequest,t=function(){};return e.open("GET",n,!0),{then:function(n){return e.onload=function(){(this.status<200||this.status>=400)&&t&&t(this),n(this.response)},e.onerror=t,e.send(),{catch:function(n){t=n}}}}};t("/assets/icons/sprite.svg").then(function(n){var e=document.createElement("figure");e.style.display="none",e.innerHTML=n,document.body.insertBefore(e,document.body.children[0])}).catch(function(n){console.warn("Icon spritesheet could not be loaded\n",n)});var r=function(){return function(n,e){if(Array.isArray(n))return n;if(Symbol.iterator in Object(n))return function(n,e){var t=[],r=!0,o=!1,i=void 0;try{for(var a,c=n[Symbol.iterator]();!(r=(a=c.next()).done)&&(t.push(a.value),!e||t.length!==e);r=!0);}catch(n){o=!0,i=n}finally{try{!r&&c.return&&c.return()}finally{if(o)throw i}}return t}(n,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),o=document.scrollingElement||document.documentElement,i={scrollBox:o,find:function(n){return(arguments.length>1&&void 0!==arguments[1]?arguments[1]:document).querySelector(n)},findAll:function(n){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:document;return[].concat(function(n){if(Array.isArray(n)){for(var e=0,t=Array(n.length);e<n.length;e++)t[e]=n[e];return t}return Array.from(n)}(e.querySelectorAll(n)))},get scrollTop(){return o.scrollTop}},a=i.find("[data-timer]"),c=0,l=i.findAll("[data-slide]").map(function(n,e){return e?n.classList.remove("active-slide"):n.classList.add("active-slide"),n}),s=function(){l[c].classList.remove("active-slide"),c=c+1===l.length?0:c+1,l[c].classList.add("active-slide"),a.classList.add("running")};a.addEventListener("transitionend",function(){a.classList.remove("running"),setTimeout(s,125)}),setTimeout(function(){a.classList.add("running")},250);var u="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},d="undefined"!=typeof window?window:void 0!==u?u:"undefined"!=typeof self?self:{},f=Object.freeze({default:d,__moduleExports:d}),m=f&&d||f,p=function(n,e){return e={exports:{}},n(e,e.exports),e.exports}(function(n,e){var t=m.requestAnimationFrame||m.webkitRequestAnimationFrame||m.mozRequestAnimationFrame||function(n){var e=+new Date,t=Math.max(0,16-(e-r)),o=setTimeout(n,t);return r=e,o},r=+new Date,o=m.cancelAnimationFrame||m.webkitCancelAnimationFrame||m.mozCancelAnimationFrame||clearTimeout;Function.prototype.bind&&(t=t.bind(m),o=o.bind(m)),(n.exports=t).cancel=o}),v=p.cancel,h=Object.freeze({default:p,__moduleExports:p,cancel:v}),g=h&&p||h,y=function(e,t,r,o){return n("scrollTop",e,t,r,o)},w=function(n){return i.scrollTop+i.find(n).getBoundingClientRect().top-i.find("[data-header]").clientHeight},b=function(n){n.preventDefault(),y(i.scrollBox,w(this.getAttribute("href")),{duration:500})};i.findAll("[data-scroll-to]").forEach(function(n){n.addEventListener("click",b)});var A=i.find("[data-header]"),E=void 0,L=void 0,k=void 0,T=function(){(E>10&&!k||E<=10&&k)&&(k=A.classList.toggle("header--docked")),L=!1},M=function(){L||requestAnimationFrame(T),L=!0,E=i.scrollTop};M(),window.addEventListener("scroll",M);i.findAll("[data-card]").forEach(function(n){(function(n){var e=r(n,2),t=e[0],o=e[1];return t.clientHeight<o.clientHeight?t:o})(n.children).style.position="absolute",i.findAll("[data-card-flip]",n).forEach(function(e){e.addEventListener("click",function(n){return function(){return n.classList.add("card--flip")}}(n))}),i.findAll("[data-card-unflip]",n).forEach(function(e){e.addEventListener("click",function(n){return function(){return n.classList.remove("card--flip")}}(n))})});var x=document.getElementById("map");x&&t("/assets/data/map-config.json").then(function(n){var e=JSON.parse(n),t=e.key,r=e.options,o=e.marker,i=function(){return new google.maps.Map(x,r)},a=function(n){return new google.maps.Marker({position:o,map:n,icon:"/assets/media/logo/llb-map.png"})};window.initMap=function(){a(i())},document.body.appendChild(function(n){var e=document.createElement("script");return e.setAttribute("async",""),e.setAttribute("defer",""),e.setAttribute("src","https://maps.googleapis.com/maps/api/js?key="+n+"&callback=initMap"),e}(t))}).catch(function(n){return console.log(n)});var F=new Date;i.findAll("time[data-year]").forEach(function(n){n.innerHTML+=F.getFullYear()});var q=i.find("[data-header]");i.find("[data-burger]",q).addEventListener("click",function(){q.classList.toggle("header--open"),document.body.classList.toggle("noscroll")}),i.findAll("[data-scroll-to]").forEach(function(n){n.addEventListener("click",function(){q.classList.remove("header--open"),document.body.classList.remove("noscroll")})})}();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9zY3JvbGwvaW5kZXguanMiLCJzY3JpcHRzL21vZHVsZXMvZmV0Y2guanMiLCJzY3JpcHRzL21vZHVsZXMvaWNvbi1zcHJpdGUuanMiLCJzY3JpcHRzL21vZHVsZXMvZG9tLWhlbHBlcnMuanMiLCJzY3JpcHRzL21vZHVsZXMvc2xpZGVyLmpzIiwibm9kZV9tb2R1bGVzL2dsb2JhbC93aW5kb3cuanMiLCJub2RlX21vZHVsZXMvcmFmbC9pbmRleC5qcyIsInNjcmlwdHMvbW9kdWxlcy9zY3JvbGwtdG8uanMiLCJzY3JpcHRzL21vZHVsZXMvZG9jay1oZWFkZXIuanMiLCJzY3JpcHRzL21vZHVsZXMvY2FyZC1mbGlwLmpzIiwic2NyaXB0cy9tb2R1bGVzL2dvb2dsZS1tYXAuanMiLCJzY3JpcHRzL21vZHVsZXMvZGF0ZXRpbWUtb3V0cHV0LmpzIiwic2NyaXB0cy9tb2R1bGVzL21vYmlsZS1tZW51LmpzIl0sIm5hbWVzIjpbInNjcm9sbCIsInByb3AiLCJlbGVtZW50IiwidG8iLCJvcHRpb25zIiwiY2FsbGJhY2siLCJhbmltYXRlIiwidGltZXN0YW1wIiwiY2FuY2VsbGVkIiwiRXJyb3IiLCJub3ciLCJEYXRlIiwidGltZSIsIk1hdGgiLCJtaW4iLCJzdGFydCIsImR1cmF0aW9uIiwiZWFzZWQiLCJlYXNlIiwiZnJvbSIsInJhZiIsImluT3V0U2luZSIsIm4iLCJjb3MiLCJQSSIsImZldGNoIiwidXJpIiwieGhyIiwiWE1MSHR0cFJlcXVlc3QiLCJlcnJvckhhbmRsZXIiLCJvcGVuIiwiY2IiLCJvbmxvYWQiLCJ0aGlzIiwic3RhdHVzIiwicmVzcG9uc2UiLCJvbmVycm9yIiwic2VuZCIsImhhbmRsZXIiLCJ0aGVuIiwic3ByaXRlIiwiZmlndXJlIiwiZG9jdW1lbnQiLCJjcmVhdGVFbGVtZW50Iiwic3R5bGUiLCJkaXNwbGF5IiwiaW5uZXJIVE1MIiwiYm9keSIsImluc2VydEJlZm9yZSIsImNoaWxkcmVuIiwiY2F0Y2giLCJlcnIiLCJ3YXJuIiwic2Nyb2xsQm94Iiwic2Nyb2xsaW5nRWxlbWVudCIsImRvY3VtZW50RWxlbWVudCIsImRvbSIsInF1ZXJ5IiwiYXJndW1lbnRzIiwibGVuZ3RoIiwidW5kZWZpbmVkIiwicXVlcnlTZWxlY3RvciIsInNjb3BlIiwicXVlcnlTZWxlY3RvckFsbCIsInNjcm9sbFRvcCIsInRpbWVyIiwiZmluZCIsImluZGV4Iiwic2xpZGVzIiwiZmluZEFsbCIsIm1hcCIsIm5vZGUiLCJpIiwiY2xhc3NMaXN0IiwicmVtb3ZlIiwiYWRkIiwic3dhcFNsaWRlcyIsImFkZEV2ZW50TGlzdGVuZXIiLCJzZXRUaW1lb3V0Iiwid2luZG93XzEiLCJ3aW5kb3ciLCJnbG9iYWwiLCJzZWxmIiwicmVxdWVzdCIsInJlcXVlc3RBbmltYXRpb25GcmFtZSIsIndlYmtpdFJlcXVlc3RBbmltYXRpb25GcmFtZSIsIm1velJlcXVlc3RBbmltYXRpb25GcmFtZSIsImZuIiwiY3VyciIsIm1zIiwibWF4IiwicHJldiIsInJlcSIsImNhbmNlbCIsImNhbmNlbEFuaW1hdGlvbkZyYW1lIiwid2Via2l0Q2FuY2VsQW5pbWF0aW9uRnJhbWUiLCJtb3pDYW5jZWxBbmltYXRpb25GcmFtZSIsImNsZWFyVGltZW91dCIsIkZ1bmN0aW9uIiwicHJvdG90eXBlIiwiYmluZCIsIm1vZHVsZSIsInNjcm9sbF8xIiwicmVzb2x2ZVRhcmdldCIsImlkIiwiZ2V0Qm91bmRpbmdDbGllbnRSZWN0IiwidG9wIiwiY2xpZW50SGVpZ2h0Iiwic2Nyb2xsSGFuZGxlciIsImUiLCJwcmV2ZW50RGVmYXVsdCIsImdldEF0dHJpYnV0ZSIsImZvckVhY2giLCJoZWFkZXIiLCJidWZmZXIiLCJkb2NrZWQiLCJ1cGRhdGUiLCJ0b2dnbGUiLCJyZXF1ZXN0VXBkYXRlIiwiX3JlZiIsImZyb250IiwiX3JlZjIiLCJiYWNrIiwicG9zaXRpb24iLCJmbGlwTm9kZSIsImdldEZsaXBIYW5kbGVyIiwidW5mbGlwTm9kZSIsImdldFVuZmxpcEhhbmRsZXIiLCJtYXBOb2RlIiwiZ2V0RWxlbWVudEJ5SWQiLCJjb25maWciLCJKU09OIiwicGFyc2UiLCJrZXkiLCJfSlNPTiRwYXJzZSIsIm1hcmtlciIsImluaXQiLCJnb29nbGUiLCJtYXBzIiwiTWFwIiwiTWFya2VyIiwiaW5pdE1hcCIsImFwcGVuZENoaWxkIiwidGFnIiwic2V0QXR0cmlidXRlIiwiZ2V0U2NyaXB0VGFnIiwiY29uc29sZSIsImxvZyIsImRhdGUiLCJnZXRGdWxsWWVhciJdLCJtYXBwaW5ncyI6InlCQUVBLFNBQVNBLEVBQVFDLEVBQU1DLEVBQVNDLEVBQUlDLEVBQVNDLFlBNkJsQ0MsRUFBU0MsTUFDWkMsU0FDS0gsRUFDTCxJQUFJSSxNQUFNLG9CQUNWUCxFQUFRRCxRQUlSUyxHQUFPLElBQUlDLEtBQ1hDLEVBQU9DLEtBQUtDLElBQUksR0FBS0osRUFBTUssR0FBU0MsR0FDcENDLEVBQVFDLEVBQUtOLEtBRVRYLEdBQVNnQixHQUFTZCxFQUFLZ0IsR0FBU0EsRUFFN0JDLElBQUosRUFBUWQsRUFBZSxhQUNuQixLQUFNSixFQUFRRCxVQTNDdkJjLEdBQVMsSUFBSUosS0FDYlEsRUFBT2pCLEVBQVFELEdBQ2ZPLEdBQVksRUFFWlUsRUFBT0csRUFDUEwsRUFBVyxVQUVRLG1CQUFaWixJQUNFQSxRQUdEQSxPQUNLYyxNQUFRQSxJQUNaZCxFQUFRWSxVQUFZQSxJQUNwQlgsR0FBWSxjQUdyQmMsSUFBU2hCLEVBQ0pFLEVBQ0wsSUFBSUksTUFBTSw2Q0FDVlAsRUFBUUQsT0EyQlJLLGlCQXRCVSxJQTJCaEIsU0FBU2UsRUFBV0MsU0FDWCxJQUFNLEVBQUlULEtBQUtVLElBQUlWLEtBQUtXLEdBQUtGLElDeER0QyxJQUFBRyxFQUFBLFNBQWdCQyxPQUNSQyxFQUFNLElBQUlDLGVBQ1pDLEVBQWUsc0JBRWZDLEtBQUssTUFBT0osR0FBSyxTQUdiLFNBQUNLLFlBQ0RDLE9BQVMsWUFDU0MsS0FBS0MsT0FBUyxLQUFPRCxLQUFLQyxRQUFVLE1BQ25DTCxHQUFjQSxFQUFhSSxRQUM3Q0EsS0FBS0UsYUFHTkMs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NEMsT0FBTyx5QkFDZnRFLEtBQUswQixVQUFVNEMsT0FBTyxjQUduQzdELEVBQUlhLFFBQVEsb0JBQ1QyQyxRQUFRLFNBQUF6QyxLQUNGTSxpQkFBaUIsUUFBUyxhQUN0QkosVUFBVUMsT0FBTyx5QkFDZjNCLEtBQUswQixVQUFVQyxPQUFPIiwiZmlsZSI6InNpdGUuanMiLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgcmFmID0gcmVxdWlyZSgncmFmbCcpXG5cbmZ1bmN0aW9uIHNjcm9sbCAocHJvcCwgZWxlbWVudCwgdG8sIG9wdGlvbnMsIGNhbGxiYWNrKSB7XG4gIHZhciBzdGFydCA9ICtuZXcgRGF0ZVxuICB2YXIgZnJvbSA9IGVsZW1lbnRbcHJvcF1cbiAgdmFyIGNhbmNlbGxlZCA9IGZhbHNlXG5cbiAgdmFyIGVhc2UgPSBpbk91dFNpbmVcbiAgdmFyIGR1cmF0aW9uID0gMzUwXG5cbiAgaWYgKHR5cGVvZiBvcHRpb25zID09PSAnZnVuY3Rpb24nKSB7XG4gICAgY2FsbGJhY2sgPSBvcHRpb25zXG4gIH1cbiAgZWxzZSB7XG4gICAgb3B0aW9ucyA9IG9wdGlvbnMgfHwge31cbiAgICBlYXNlID0gb3B0aW9ucy5lYXNlIHx8IGVhc2VcbiAgICBkdXJhdGlvbiA9IG9wdGlvbnMuZHVyYXRpb24gfHwgZHVyYXRpb25cbiAgICBjYWxsYmFjayA9IGNhbGxiYWNrIHx8IGZ1bmN0aW9uICgpIHt9XG4gIH1cblxuICBpZiAoZnJvbSA9PT0gdG8pIHtcbiAgICByZXR1cm4gY2FsbGJhY2soXG4gICAgICBuZXcgRXJyb3IoJ0VsZW1lbnQgYWxyZWFkeSBhdCB0YXJnZXQgc2Nyb2xsIHBvc2l0aW9uJyksXG4gICAgICBlbGVtZW50W3Byb3BdXG4gICAgKVxuICB9XG5cbiAgZnVuY3Rpb24gY2FuY2VsICgpIHtcbiAgICBjYW5jZWxsZWQgPSB0cnVlXG4gIH1cblxuICBmdW5jdGlvbiBhbmltYXRlICh0aW1lc3RhbXApIHtcbiAgICBpZiAoY2FuY2VsbGVkKSB7XG4gICAgICByZXR1cm4gY2FsbGJhY2soXG4gICAgICAgIG5ldyBFcnJvcignU2Nyb2xsIGNhbmNlbGxlZCcpLFxuICAgICAgICBlbGVtZW50W3Byb3BdXG4gICAgICApXG4gICAgfVxuXG4gICAgdmFyIG5vdyA9ICtuZXcgRGF0ZVxuICAgIHZhciB0aW1lID0gTWF0aC5taW4oMSwgKChub3cgLSBzdGFydCkgLyBkdXJhdGlvbikpXG4gICAgdmFyIGVhc2VkID0gZWFzZSh0aW1lKVxuXG4gICAgZWxlbWVudFtwcm9wXSA9IChlYXNlZCAqICh0byAtIGZyb20pKSArIGZyb21cblxuICAgIHRpbWUgPCAxID8gcmFmKGFuaW1hdGUpIDogcmFmKGZ1bmN0aW9uICgpIHtcbiAgICAgIGNhbGxiYWNrKG51bGwsIGVsZW1lbnRbcHJvcF0pXG4gICAgfSlcbiAgfVxuXG4gIHJhZihhbmltYXRlKVxuXG4gIHJldHVybiBjYW5jZWxcbn1cblxuZnVuY3Rpb24gaW5PdXRTaW5lIChuKSB7XG4gIHJldHVybiAuNSAqICgxIC0gTWF0aC5jb3MoTWF0aC5QSSAqIG4pKVxufVxuXG5tb2R1bGUuZXhwb3J0cyA9IHtcbiAgdG9wOiBmdW5jdGlvbiAoZWxlbWVudCwgdG8sIG9wdGlvbnMsIGNhbGxiYWNrKSB7XG4gICAgcmV0dXJuIHNjcm9sbCgnc2Nyb2xsVG9wJywgZWxlbWVudCwgdG8sIG9wdGlvbnMsIGNhbGxiYWNrKVxuICB9LFxuICBsZWZ0OiBmdW5jdGlvbiAoZWxlbWVudCwgdG8sIG9wdGlvbnMsIGNhbGxiYWNrKSB7XG4gICAgcmV0dXJuIHNjcm9sbCgnc2Nyb2xsTGVmdCcsIGVsZW1lbnQsIHRvLCBvcHRpb25zLCBjYWxsYmFjaylcbiAgfVxufVxuIiwiZXhwb3J0IGRlZmF1bHQgKHVyaSkgPT4ge1xuICBjb25zdCB4aHIgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKVxuICBsZXQgZXJyb3JIYW5kbGVyID0gKCkgPT4ge31cblxuICB4aHIub3BlbignR0VUJywgdXJpLCB0cnVlKVxuXG4gIHJldHVybiB7XG4gICAgdGhlbjogKGNiKSA9PiB7XG4gICAgICB4aHIub25sb2FkID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIGxldCB2YWxpZFJlc3BvbnNlID0gdGhpcy5zdGF0dXMgPCAyMDAgfHwgdGhpcy5zdGF0dXMgPj0gNDAwXG4gICAgICAgIGlmICh2YWxpZFJlc3BvbnNlICYmIGVycm9ySGFuZGxlcikgZXJyb3JIYW5kbGVyKHRoaXMpXG4gICAgICAgIGNiKHRoaXMucmVzcG9uc2UpXG4gICAgICB9XG5cbiAgICAgIHhoci5vbmVycm9yID0gZXJyb3JIYW5kbGVyXG4gICAgICB4aHIuc2VuZCgpXG5cbiAgICAgIHJldHVybiB7XG4gICAgICAgIGNhdGNoOiAoaGFuZGxlcikgPT4geyBlcnJvckhhbmRsZXIgPSBoYW5kbGVyIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cbn1cbiIsImltcG9ydCBmZXRjaCBmcm9tICcuL2ZldGNoJ1xuXG5mZXRjaCgnL2Fzc2V0cy9pY29ucy9zcHJpdGUuc3ZnJylcbiAgLnRoZW4oc3ByaXRlID0+IHtcbiAgICBsZXQgZmlndXJlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZmlndXJlJylcbiAgICBmaWd1cmUuc3R5bGUuZGlzcGxheSA9ICdub25lJ1xuICAgIGZpZ3VyZS5pbm5lckhUTUwgPSBzcHJpdGVcbiAgICBkb2N1bWVudC5ib2R5Lmluc2VydEJlZm9yZShmaWd1cmUsIGRvY3VtZW50LmJvZHkuY2hpbGRyZW5bMF0pXG4gIH0pXG4gIC5jYXRjaChlcnIgPT4ge1xuICAgIGNvbnNvbGUud2FybignSWNvbiBzcHJpdGVzaGVldCBjb3VsZCBub3QgYmUgbG9hZGVkXFxuJywgZXJyKVxuICB9KVxuIiwiY29uc3Qgc2Nyb2xsQm94ID0gZG9jdW1lbnQuc2Nyb2xsaW5nRWxlbWVudCB8fCBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnRcblxuZXhwb3J0IGRlZmF1bHQge1xuICBzY3JvbGxCb3gsXG5cbiAgZmluZDogKHF1ZXJ5LCBzY29wZSA9IGRvY3VtZW50KSA9PlxuICAgIHNjb3BlLnF1ZXJ5U2VsZWN0b3IocXVlcnkpLFxuXG4gIGZpbmRBbGw6IChxdWVyeSwgc2NvcGUgPSBkb2N1bWVudCkgPT5cbiAgICBbLi4uc2NvcGUucXVlcnlTZWxlY3RvckFsbChxdWVyeSldLFxuXG4gIGdldCBzY3JvbGxUb3AoKSB7XG4gICAgcmV0dXJuIHNjcm9sbEJveC5zY3JvbGxUb3BcbiAgfVxufVxuIiwiaW1wb3J0IGRvbSBmcm9tICcuL2RvbS1oZWxwZXJzJ1xuXG5jb25zdCB0aW1lciA9IGRvbS5maW5kKCdbZGF0YS10aW1lcl0nKVxubGV0IGluZGV4ID0gMFxuXG5jb25zdCBzbGlkZXMgPSBkb20uZmluZEFsbCgnW2RhdGEtc2xpZGVdJylcbiAgLm1hcCgobm9kZSwgaSkgPT4ge1xuICAgIGlmICghaSkgbm9kZS5jbGFzc0xpc3QuYWRkKCdhY3RpdmUtc2xpZGUnKVxuICAgIGVsc2Ugbm9kZS5jbGFzc0xpc3QucmVtb3ZlKCdhY3RpdmUtc2xpZGUnKVxuICAgIHJldHVybiBub2RlXG4gIH0pXG5cbmNvbnN0IHN3YXBTbGlkZXMgPSAoKSA9PiB7XG4gIHNsaWRlc1tpbmRleF0uY2xhc3NMaXN0LnJlbW92ZSgnYWN0aXZlLXNsaWRlJylcbiAgaW5kZXggPSAoaW5kZXggKyAxID09PSBzbGlkZXMubGVuZ3RoKSA/IDAgOiBpbmRleCArIDFcbiAgc2xpZGVzW2luZGV4XS5jbGFzc0xpc3QuYWRkKCdhY3RpdmUtc2xpZGUnKVxuICB0aW1lci5jbGFzc0xpc3QuYWRkKCdydW5uaW5nJylcbn1cblxudGltZXIuYWRkRXZlbnRMaXN0ZW5lcigndHJhbnNpdGlvbmVuZCcsICgpID0+IHtcbiAgdGltZXIuY2xhc3NMaXN0LnJlbW92ZSgncnVubmluZycpXG4gIHNldFRpbWVvdXQoc3dhcFNsaWRlcywgMTI1KVxufSlcblxuc2V0VGltZW91dCgoKSA9PiB7XG4gIHRpbWVyLmNsYXNzTGlzdC5hZGQoJ3J1bm5pbmcnKVxufSwgMjUwKVxuIiwidmFyIHdpbjtcblxuaWYgKHR5cGVvZiB3aW5kb3cgIT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICB3aW4gPSB3aW5kb3c7XG59IGVsc2UgaWYgKHR5cGVvZiBnbG9iYWwgIT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICB3aW4gPSBnbG9iYWw7XG59IGVsc2UgaWYgKHR5cGVvZiBzZWxmICE9PSBcInVuZGVmaW5lZFwiKXtcbiAgICB3aW4gPSBzZWxmO1xufSBlbHNlIHtcbiAgICB3aW4gPSB7fTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSB3aW47XG4iLCJ2YXIgZ2xvYmFsID0gcmVxdWlyZSgnZ2xvYmFsJylcblxuLyoqXG4gKiBgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKClgXG4gKi9cblxudmFyIHJlcXVlc3QgPSBnbG9iYWwucmVxdWVzdEFuaW1hdGlvbkZyYW1lXG4gIHx8IGdsb2JhbC53ZWJraXRSZXF1ZXN0QW5pbWF0aW9uRnJhbWVcbiAgfHwgZ2xvYmFsLm1velJlcXVlc3RBbmltYXRpb25GcmFtZVxuICB8fCBmYWxsYmFja1xuXG52YXIgcHJldiA9ICtuZXcgRGF0ZVxuZnVuY3Rpb24gZmFsbGJhY2sgKGZuKSB7XG4gIHZhciBjdXJyID0gK25ldyBEYXRlXG4gIHZhciBtcyA9IE1hdGgubWF4KDAsIDE2IC0gKGN1cnIgLSBwcmV2KSlcbiAgdmFyIHJlcSA9IHNldFRpbWVvdXQoZm4sIG1zKVxuICByZXR1cm4gcHJldiA9IGN1cnIsIHJlcVxufVxuXG4vKipcbiAqIGBjYW5jZWxBbmltYXRpb25GcmFtZSgpYFxuICovXG5cbnZhciBjYW5jZWwgPSBnbG9iYWwuY2FuY2VsQW5pbWF0aW9uRnJhbWVcbiAgfHwgZ2xvYmFsLndlYmtpdENhbmNlbEFuaW1hdGlvbkZyYW1lXG4gIHx8IGdsb2JhbC5tb3pDYW5jZWxBbmltYXRpb25GcmFtZVxuICB8fCBjbGVhclRpbWVvdXRcblxuaWYgKEZ1bmN0aW9uLnByb3RvdHlwZS5iaW5kKSB7XG4gIHJlcXVlc3QgPSByZXF1ZXN0LmJpbmQoZ2xvYmFsKVxuICBjYW5jZWwgPSBjYW5jZWwuYmluZChnbG9iYWwpXG59XG5cbmV4cG9ydHMgPSBtb2R1bGUuZXhwb3J0cyA9IHJlcXVlc3RcbmV4cG9ydHMuY2FuY2VsID0gY2FuY2VsXG4iLCJpbXBvcnQgc2Nyb2xsIGZyb20gJ3Njcm9sbCdcbmltcG9ydCBkb20gZnJvbSAnLi9kb20taGVscGVycydcblxuY29uc3QgbmF2SGVpZ2h0ID0gKCkgPT5cbiAgZG9tLmZpbmQoJ1tkYXRhLWhlYWRlcl0nKS5jbGllbnRIZWlnaHRcblxuY29uc3QgcmVzb2x2ZVRhcmdldCA9IChpZCkgPT5cbiAgZG9tLnNjcm9sbFRvcCArIGRvbS5maW5kKGlkKS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS50b3AgLSBuYXZIZWlnaHQoKVxuXG5jb25zdCBzY3JvbGxIYW5kbGVyID0gZnVuY3Rpb24oZSkge1xuICBlLnByZXZlbnREZWZhdWx0KClcbiAgc2Nyb2xsLnRvcChkb20uc2Nyb2xsQm94LCByZXNvbHZlVGFyZ2V0KHRoaXMuZ2V0QXR0cmlidXRlKCdocmVmJykpLCB7IGR1cmF0aW9uOiA1MDAgfSlcbn1cblxuZG9tLmZpbmRBbGwoJ1tkYXRhLXNjcm9sbC10b10nKVxuICAuZm9yRWFjaChub2RlID0+IHtcbiAgICBub2RlLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgc2Nyb2xsSGFuZGxlcilcbiAgfSlcbiIsImltcG9ydCBkb20gZnJvbSAnLi9kb20taGVscGVycydcblxuY29uc3QgaGVhZGVyID0gZG9tLmZpbmQoJ1tkYXRhLWhlYWRlcl0nKVxubGV0IHNjcm9sbCwgYnVmZmVyLCBkb2NrZWRcblxuY29uc3QgdXBkYXRlID0gKCkgPT4ge1xuICBsZXQgZG9jayA9IHNjcm9sbCA+IDEwICYmICFkb2NrZWRcbiAgbGV0IHVuZG9jayA9IHNjcm9sbCA8PSAxMCAmJiBkb2NrZWRcblxuICBpZiAoZG9jayB8fCB1bmRvY2spIGRvY2tlZCA9IGhlYWRlci5jbGFzc0xpc3QudG9nZ2xlKCdoZWFkZXItLWRvY2tlZCcpXG4gIGJ1ZmZlciA9IGZhbHNlXG59XG5cbmNvbnN0IHJlcXVlc3RVcGRhdGUgPSAoKSA9PiB7XG4gIGlmICghYnVmZmVyKSByZXF1ZXN0QW5pbWF0aW9uRnJhbWUodXBkYXRlKVxuICBidWZmZXIgPSB0cnVlXG4gIHNjcm9sbCA9IGRvbS5zY3JvbGxUb3Bcbn1cblxucmVxdWVzdFVwZGF0ZSgpXG53aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignc2Nyb2xsJywgcmVxdWVzdFVwZGF0ZSlcbiIsImltcG9ydCBkb20gZnJvbSAnLi9kb20taGVscGVycydcblxuY29uc3QgZ2V0RmxpcEhhbmRsZXIgPSAobm9kZSkgPT5cbiAgKCkgPT4gbm9kZS5jbGFzc0xpc3QuYWRkKCdjYXJkLS1mbGlwJylcblxuY29uc3QgZ2V0VW5mbGlwSGFuZGxlciA9IChub2RlKSA9PlxuICAoKSA9PiBub2RlLmNsYXNzTGlzdC5yZW1vdmUoJ2NhcmQtLWZsaXAnKVxuXG5jb25zdCBnZXRTaG9ydGVzdFNpZGUgPSAoW2Zyb250LCBiYWNrXSkgPT5cbiAgKGZyb250LmNsaWVudEhlaWdodCA8IGJhY2suY2xpZW50SGVpZ2h0KSA/IGZyb250IDogYmFja1xuXG5kb20uZmluZEFsbCgnW2RhdGEtY2FyZF0nKVxuICAuZm9yRWFjaChub2RlID0+IHtcbiAgICBnZXRTaG9ydGVzdFNpZGUobm9kZS5jaGlsZHJlbilcbiAgICAgIC5zdHlsZS5wb3NpdGlvbiA9ICdhYnNvbHV0ZSdcblxuICAgIGRvbS5maW5kQWxsKCdbZGF0YS1jYXJkLWZsaXBdJywgbm9kZSlcbiAgICAgIC5mb3JFYWNoKGZsaXBOb2RlID0+IHtcbiAgICAgICAgZmxpcE5vZGUuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBnZXRGbGlwSGFuZGxlcihub2RlKSlcbiAgICAgIH0pXG5cbiAgICBkb20uZmluZEFsbCgnW2RhdGEtY2FyZC11bmZsaXBdJywgbm9kZSlcbiAgICAgIC5mb3JFYWNoKHVuZmxpcE5vZGUgPT4ge1xuICAgICAgICB1bmZsaXBOb2RlLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZ2V0VW5mbGlwSGFuZGxlcihub2RlKSlcbiAgICAgIH0pXG4gIH0pXG4iLCJpbXBvcnQgZmV0Y2ggZnJvbSAnLi9mZXRjaCdcblxuY29uc3QgbWFwTm9kZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdtYXAnKVxuXG5jb25zdCBnZXRTY3JpcHRUYWcgPSAoa2V5KSA9PiB7XG4gIGxldCB0YWcgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzY3JpcHQnKVxuICB0YWcuc2V0QXR0cmlidXRlKCdhc3luYycsICcnKVxuICB0YWcuc2V0QXR0cmlidXRlKCdkZWZlcicsICcnKVxuICB0YWcuc2V0QXR0cmlidXRlKCdzcmMnLCBgaHR0cHM6Ly9tYXBzLmdvb2dsZWFwaXMuY29tL21hcHMvYXBpL2pzP2tleT0ke2tleX0mY2FsbGJhY2s9aW5pdE1hcGApXG4gIHJldHVybiB0YWdcbn1cblxuaWYgKG1hcE5vZGUpIHtcbiAgZmV0Y2goJy9hc3NldHMvZGF0YS9tYXAtY29uZmlnLmpzb24nKVxuICAgIC50aGVuKGNvbmZpZyA9PiB7XG4gICAgICBsZXQgeyBrZXksIG9wdGlvbnMsIG1hcmtlcjogcG9zaXRpb24gfSA9IEpTT04ucGFyc2UoY29uZmlnKVxuXG4gICAgICBjb25zdCBpbml0ID0ge1xuICAgICAgICBtYXA6ICgpID0+IG5ldyBnb29nbGUubWFwcy5NYXAobWFwTm9kZSwgb3B0aW9ucyksXG4gICAgICAgIG1hcmtlcjogKG1hcCkgPT4gbmV3IGdvb2dsZS5tYXBzLk1hcmtlcih7XG4gICAgICAgICAgcG9zaXRpb24sXG4gICAgICAgICAgbWFwLFxuICAgICAgICAgIGljb246ICcvYXNzZXRzL21lZGlhL2xvZ28vbGxiLW1hcC5wbmcnXG4gICAgICAgIH0pXG4gICAgICB9XG5cbiAgICAgIHdpbmRvdy5pbml0TWFwID0gKCkgPT4ge1xuICAgICAgICBpbml0Lm1hcmtlcihpbml0Lm1hcCgpKVxuICAgICAgfVxuXG4gICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGdldFNjcmlwdFRhZyhrZXkpKVxuICAgIH0pXG4gICAgLmNhdGNoKGVyciA9PiBjb25zb2xlLmxvZyhlcnIpKVxufVxuIiwiaW1wb3J0IGRvbSBmcm9tICcuL2RvbS1oZWxwZXJzJ1xuXG5jb25zdCBkYXRlID0gbmV3IERhdGUoKVxuXG5kb20uZmluZEFsbCgndGltZVtkYXRhLXllYXJdJylcbiAgLmZvckVhY2gobm9kZSA9PiB7XG4gICAgbm9kZS5pbm5lckhUTUwgKz0gZGF0ZS5nZXRGdWxsWWVhcigpXG4gIH0pXG4iLCJpbXBvcnQgZG9tIGZyb20gJy4vZG9tLWhlbHBlcnMnXG5cbmNvbnN0IGhlYWRlciA9IGRvbS5maW5kKCdbZGF0YS1oZWFkZXJdJylcblxuZG9tLmZpbmQoJ1tkYXRhLWJ1cmdlcl0nLCBoZWFkZXIpXG4gIC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICBoZWFkZXIuY2xhc3NMaXN0LnRvZ2dsZSgnaGVhZGVyLS1vcGVuJylcbiAgICBkb2N1bWVudC5ib2R5LmNsYXNzTGlzdC50b2dnbGUoJ25vc2Nyb2xsJylcbiAgfSlcblxuZG9tLmZpbmRBbGwoJ1tkYXRhLXNjcm9sbC10b10nKVxuICAuZm9yRWFjaChub2RlID0+IHtcbiAgICBub2RlLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgaGVhZGVyLmNsYXNzTGlzdC5yZW1vdmUoJ2hlYWRlci0tb3BlbicpXG4gICAgICBkb2N1bWVudC5ib2R5LmNsYXNzTGlzdC5yZW1vdmUoJ25vc2Nyb2xsJylcbiAgICB9KVxuICB9KVxuIl19
